"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[837],{94805:function(e,n,t){var r=t(1413),a=(t(72791),t(36473)),i=t(80184);n.Z=function(e){var n=e.bordered,t=void 0!==n&&n,c=e.children,o=e.style,s=void 0===o?{}:o,l=e.hoverable,u=void 0!==l&&l,d=e.className;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a.Z,{hoverable:u,bordered:t,bodyStyle:(0,r.Z)({padding:"16px"},s),className:d,children:c})})}},64290:function(e,n,t){var r=t(1413),a=t(72791),i=t(57184),c=t(15255),o=t(85060),s=t(80184);n.Z=function(e){var n=e.total,t=e.page,l=e.onPaginationChange,u=e.showTotal,d=void 0===u||u,f=e.showSizeChanger,p=void 0===f||f,h=e.showQuickJumper,m=void 0===h||h,x=e.style,v=e.className,g=(0,c.CG)(o.h2),y=(0,a.useMemo)((function(){return"small"===g?"small":"default"}),[g]),Z=t.current,j=Z.pageNum,k=Z.pageSize;return(0,s.jsx)(i.Z,{style:(0,r.Z)({marginTop:"30px",float:"right"},x),className:v,total:n,showSizeChanger:p,showQuickJumper:m,defaultCurrent:j,defaultPageSize:k,current:j,pageSize:k,onChange:function(e,n){t.current={pageSize:n,pageNum:e},l("subimt")},size:y,showTotal:function(e){if(d)return"总 ".concat(e," 条")}})}},35443:function(e,n,t){t(72791);var r=t(61431),a=t(22044),i=t(80184);n.Z=function(e){var n=e.children,t=e.title,c=e.overlayInnerStyle,o=e.placement,s=void 0===o?"top":o,l=(e.color,(0,a.Z)().token);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.Z,{placement:s,overlayInnerStyle:c,color:l.colorPrimary,title:t,children:n})})}},72725:function(e,n,t){t.d(n,{n:function(){return a}});var r=t(93433),a=function(e,n,t){var a=JSON.parse(JSON.stringify(e));return a.splice.apply(a,[t,0].concat((0,r.Z)(a.splice(n,1)))),a}},9643:function(e,n,t){t.r(n),t.d(n,{default:function(){return re}});var r=t(1413),a=t(29439),i=t(72791),c=t(95474),o=t(87309),s=t(35443),l=t(5058),u=t(57689),d=t(11730),f=t(29540),p=t(66106),h=t(30914),m=t(40269),x=t(80184),v=f.Z.SHOW_PARENT,g=function(e){var n=e.value,t=e.option,r=e.fieldNames,a=e.onChange,i=e.placeholder;return(0,m.h)({value:n,option:t,fieldNames:r,onChange:a,placeholder:i,checkbox:!0,showCheckedStrategy:v})},y=function(e){var n=e.children,t=e.onSubmit,r=e.onClose;return(0,x.jsxs)(p.Z,{className:"p-2",children:[(0,x.jsx)(h.Z,{children:(0,x.jsx)("div",{className:"w-52",children:n})}),(0,x.jsxs)(h.Z,{children:[(0,x.jsx)(o.ZP,{className:"ml-2",type:"default",onClick:r,children:"清空"}),(0,x.jsx)(o.ZP,{className:"ml-2",type:"primary",onClick:t,children:"确定"})]})]})},Z=function(e){return"treeSelect"===e?g:function(){return(0,x.jsx)(x.Fragment,{children:"出错啦"})}},j=function(e){var n=e.type,t=e.form,a=e.selectedKeys,c=e.setSelectedKeys,o=e.confirm,s=e.visible,l=e.dataIndex,u=e.onSearch,d=e.SeachFormItem;(0,i.useEffect)((function(){s&&c(t.current[l]||[])}),[s]);return(0,x.jsx)(y,{onClose:function(){t.current[l]=[],c([]),o(),u()},onSubmit:function(){t.current[l]=a,c(a),o(),u()},children:Z(n)((0,r.Z)({value:a,onChange:function(e){c(e)}},d))})},k=function(e){var n=e.type,t=e.dataIndex,r=e.onSearch,a=e.form,i=e.SeachFormItem;return{filterDropdown:function(e){var c=e.selectedKeys,o=e.setSelectedKeys,s=e.confirm,l=e.visible;return(0,x.jsx)(j,{type:n,form:a,dataIndex:t,selectedKeys:c,setSelectedKeys:o,confirm:s,visible:l,onSearch:r,SeachFormItem:i})},filterIcon:function(e){var n;return(0,x.jsx)(d.Z,{style:{color:null!==(n=a.current[t])&&void 0!==n&&n.length?"#1890ff":void 0}})}}},S=function(e){var n=e.buttonEvent,t=e.columnsSeachValue,c=(0,u.s0)(),d=(0,i.useState)([]),f=(0,a.Z)(d,2),p=f[0],h=f[1];return{columns:[(0,r.Z)((0,r.Z)({title:"名字",dataIndex:"name",key:"name"},k({type:"treeSelect",dataIndex:"name",onSearch:function(){return n("name")},form:t,SeachFormItem:{option:[{title:"placeholder",value:"light"},{title:"placeholder1",value:"light1"}],fieldNames:{label:"title",value:"value"},placeholder:"请选择名字"}})),{},{width:100,align:"center",render:function(e,n){return(0,x.jsx)(s.Z,{placement:"top",overlayInnerStyle:{width:200},title:(0,x.jsx)(x.Fragment,{children:e}),children:(0,x.jsx)(o.ZP,{type:"link",style:{width:100},onClick:function(){return function(e,n){"name"===e&&c("/mycenter",{state:{name:n.name}})}("name",n)},children:(0,x.jsx)("div",{className:"truncate",style:{width:70},children:e})})})}}),{title:"年龄",dataIndex:"age",key:"age",width:100,align:"center",render:function(e){return(0,x.jsx)(s.Z,{placement:"top",overlayInnerStyle:{width:"100px"},title:(0,x.jsx)(x.Fragment,{children:e}),children:(0,x.jsx)("div",{className:"truncate",children:e})})}},{title:"体重",dataIndex:"weight",key:"weight",align:"center",render:function(e){return(0,x.jsx)(s.Z,{placement:"top",overlayInnerStyle:{width:"100px"},title:(0,x.jsx)(x.Fragment,{children:e}),children:(0,x.jsx)("div",{className:"truncate",children:e})})}},{title:"身高",dataIndex:"height",key:"height",align:"center",render:function(e){return(0,x.jsx)(s.Z,{placement:"top",overlayInnerStyle:{width:"100px"},title:(0,x.jsx)(x.Fragment,{children:e}),children:(0,x.jsx)("div",{className:"truncate",children:e})})}},{title:"备注",dataIndex:"remark",key:"remark",align:"center",render:function(e){return(0,x.jsx)(s.Z,{placement:"top",overlayInnerStyle:{width:"180px"},title:(0,x.jsx)(x.Fragment,{children:e}),children:(0,x.jsx)("div",{className:"truncate",children:e})})}},{title:"操作",key:"operation",width:80,align:"center",render:function(e,t){return(0,x.jsx)(l.Z,{btArr:p,onOpenChange:function(e){return function(e,n){e&&h([{type:"修改",name:"修改",btType:"link"},{type:"删除",name:"删除",btType:"link"}])}(e)},onClickBtn:function(e){return n(e,t)}})}}]}},b=t(57773),C=t(94805),w=t(75955),I=t(88182),F=t(40447),N={position:"fixed",top:138,right:200,zIndex:10,transform:"translate(-50%, 0)"},P=function(e){var n=e.children,t=(0,i.useRef)(),c=(0,i.useRef)(),s=(0,i.useState)(!0),l=(0,a.Z)(s,2),u=l[0],f=l[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I.E.div,{onDrag:function(e,n){t.current=n.offset,c.current=n.point,e.preventDefault(),e.stopPropagation()},onClick:function(){if(t.current)return setTimeout((function(){t.current=null}),100);f(!1)},drag:!0,dragElastic:0,dragConstraints:{top:-50,left:-200,right:50,bottom:200},style:(0,r.Z)({display:u?"block":"none",textAlign:"center"},N),children:(0,x.jsx)(o.ZP,{shape:"circle",icon:(0,x.jsx)(d.Z,{})})}),(0,x.jsx)("div",{style:{position:"fixed",top:115,left:"57%",width:"80vw",zIndex:10,transform:"translate(-50%, 0)"},children:!u&&(0,x.jsx)(I.E.div,{style:{opacity:0},animate:{opacity:1,y:"auto"},transition:{ease:"linear",duration:.3},children:(0,x.jsxs)(C.Z,{className:"shadow-2xl",children:[n,(0,x.jsx)("div",{children:(0,x.jsx)(o.ZP,{type:"link",onClick:function(){f(!0)},style:{position:"absolute",bottom:0,left:"50%",transform:"translate(-50%, 0)"},icon:(0,x.jsx)(F.Z,{})})})]})})})]})},D=t(75202),K=function(e){var n=e.form,t=e.formList;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(D.r6,{MaxWidth:1540,children:(0,x.jsx)(P,{children:(0,x.jsx)(w.Z,{form:n,formList:t})})}),(0,x.jsx)(D.go,{MinWidth:1540,children:(0,x.jsx)(C.Z,{style:{paddingBottom:0},children:(0,x.jsx)(w.Z,{form:n,formList:t})})})]})},z=t(74165),T=t(15861),E=t(3496),L=function(e){var n=e.form,t=e.onFinish,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,i.useState)([]),t=(0,a.Z)(n,2),r=t[0],c=t[1];(0,i.useEffect)((function(){return o(),function(){c([])}}),e);var o=function(){var e=(0,T.Z)((0,z.Z)().mark((function e(){var n,t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.i)();case 2:n=e.sent,t=n.data,c(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{statusData:r}}(),c=[{type:"input",name:"age",label:"年龄",key:2,layout:{labelCol:{span:6},wrapperCol:{span:18}},span:6},{type:"select",name:"status",label:"状态",option:r.statusData,fieldNames:{label:"name",value:"status"},key:3,layout:{labelCol:{span:6},wrapperCol:{span:18}},span:6},{type:"button",name:"button",key:14,span:6,option:[{btType:"primary",type:"subimt",name:"搜索",iconFont:"icon-sousuo"},{type:"onReset",name:"重置",iconFont:"icon-zhongzhi",className:"ml-1"}],style:{marginLeft:"10px"},onClick:t}];return(0,x.jsx)(K,{form:n,formList:c})},O=t(64290),R=t(92414),A=t(93433),H=t(15255),V=t(87175),M=t(32014),J=t(51283),B=t(54341),G=t(72725),W=function(e){var n=e.initData,t=e.checkedKeys,r=e.updateInitData,a=e.updateCheckedKeys;return(0,x.jsx)(B.Z,{className:"draggable-tree",checkedKeys:t,onCheck:function(e){a(e)},draggable:!0,blockNode:!0,onDragEnter:function(e){},onDrop:function(e){var t=n.findIndex((function(n){return n.headerFieldId===e.dragNodesKeys[0]}));if((-1!==e.dropPosition||0!==t)&&e.dropPosition!==t)if(-1===e.dropPosition){var a=(0,G.n)(n,t,0);r(a)}else if(e.dropPosition>t){var i=(0,G.n)(n,t,e.dropPosition-1);r(i)}else if(e.dropPosition<t){var c=(0,G.n)(n,t,e.dropPosition);r(c)}},treeData:n,fieldNames:{title:"headerFieldName",key:"headerFieldId",children:"children"},checkable:!0})},_=function(e,n){var t=(0,H.CG)(V.RB),r=(0,i.useState)([]),c=(0,a.Z)(r,2),o=c[0],s=c[1],l=(0,i.useState)([]),u=(0,a.Z)(l,2),d=u[0],f=u[1];return(0,i.useEffect)((function(){if(n){var r=Q(e,t);s(r);var a=function(e){return e.reduce((function(e,n){return"true"===n.headerSelected?[].concat((0,A.Z)(e),[n.headerFieldId]):e}),[])}(r);f(a)}}),[t,n]),{headerConfigItem:o,setHeaderConfigItem:s,checkedKeys:d,setCheckedKeys:f}},Q=function(e,n){return n.reduce((function(n,t){return t.type===e?t.headerField:n}),[])},q=t(87640);var U=function(e){var n=e.type,t=e.open,r=e.closeHeader,c=(0,H.TL)(),o=_(n,t),s=o.headerConfigItem,l=o.setHeaderConfigItem,u=o.checkedKeys,d=o.setCheckedKeys,f=(0,i.useState)(!1),p=(0,a.Z)(f,2),h=p[0],m=p[1],v=function(){var e=(0,T.Z)((0,z.Z)().mark((function e(){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),t=s.reduce((function(e,n){return-1===u.indexOf(n.headerFieldId)?[].concat((0,A.Z)(e),[n.headerFieldId]):e}),[]),e.prev=2,e.next=5,a={type:n,headerField:t},(0,q.ZP)({url:"/updateHeader",method:"post",data:a});case 5:c((0,V.Mq)()),r(),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:m(!1);case 12:case"end":return e.stop()}var a}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),g=function(){r()},y=(0,i.useState)(!1),Z=(0,a.Z)(y,2),j=Z[0],k=Z[1],S=(0,i.useState)(!1),b=(0,a.Z)(S,2),C=b[0],w=b[1];(0,i.useEffect)((function(){0===u.length?I("0"):s.length===u.length?I("2"):I("1")}),[u]);var I=function(e){"0"===e?(k(!1),w(!1)):"1"===e?(k(!0),w(!1)):"2"===e&&(k(!1),w(!0))};return(0,x.jsxs)(J.Z,{title:"编辑表头",open:t,onOkOrCancel:function(e){"ok"===e?v():"cancel"===e&&g()},confirmLoading:h,children:[(0,x.jsx)(M.Z,{indeterminate:j,onChange:function(e){if(k(!1),w(e.target.checked),e.target.checked){var n=s.reduce((function(e,n){return[].concat((0,A.Z)(e),[n.headerFieldId])}),[]);d(n)}else d([])},checked:C,children:"全选"}),(0,x.jsx)(W,{initData:s,checkedKeys:u,updateInitData:function(e){l(e)},updateCheckedKeys:function(e){d(e)}})]})},X=(0,i.memo)(U),Y=function(e){var n=e.children,t=e.type,r=(0,i.useState)(!1),c=(0,a.Z)(r,2),s=c[0],l=c[1],u=(0,i.useCallback)((function(){l(!1)}),[s]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(p.Z,{justify:"space-between",children:[(0,x.jsx)(h.Z,{children:n}),(0,x.jsx)(h.Z,{children:(0,x.jsx)(p.Z,{children:(0,x.jsx)(h.Z,{children:(0,x.jsx)(o.ZP,{type:"link",icon:(0,x.jsx)(R.Z,{}),onClick:function(){l(!0)}})})})})]}),(0,x.jsx)(X,{type:t,open:s,closeHeader:u})]})},$=function(e){return(0,q.ZP)({url:"/expenses/tabelData",method:"post",data:e})},ee=t(46988),ne=t(12606),te=function(e){var n=(0,u.TH)(),t=e||n.pathname,r=(0,H.TL)(),a=(0,H.CG)(ne.FV),c=(0,i.useMemo)((function(){return a}),[]),o=["/antd/expenses"];return{initKeepAliveData:c,setKeepAliveData:function(e){o.indexOf(t)>-1&&("/antd/expenses"===t?r((0,ne.x7)(e)):ee.ZP.error("没有匹配到缓存path"))}}},re=function(){var e=(0,i.useRef)({name:[]}),n=S({buttonEvent:function(e,n){"name"===e&&(v.current.pageNum=1,y("subimt"))},columnsSeachValue:e}).columns,t=c.Z.useForm(),o=(0,a.Z)(t,1)[0],s=function(){var e=(0,i.useState)([]),n=(0,a.Z)(e,2),t=n[0],c=n[1],o=(0,i.useState)(0),s=(0,a.Z)(o,2),l=s[0],u=s[1],d=(0,i.useState)(!1),f=(0,a.Z)(d,2),p=f[0],h=f[1],m=function(){var e=(0,T.Z)((0,z.Z)().mark((function e(n){var t,a,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,$((0,r.Z)({},n));case 4:t=e.sent,a=t.data,i=t.total,c(a),u(i),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:h(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}();return{expensesTableData:t,total:l,getTabelData:m,loading:p}}(),l=s.expensesTableData,u=s.total,d=s.getTabelData,f=s.loading,p=te(),h=p.initKeepAliveData,m=p.setKeepAliveData,v=(0,i.useRef)({pageSize:(null==h?void 0:h.pageSize)||10,pageNum:(null==h?void 0:h.pageNum)||1}),g=function(e){m(e)};(0,i.useEffect)((function(){var n=h||{},t=n.pageNum,r=n.pageSize,a=n.name,i=n.age,c=n.status;o.setFieldsValue({age:i,status:c}),e.current.name=a,v.current={pageNum:t||v.current.pageNum,pageSize:r||v.current.pageSize},y("subimt")}),[]);var y=function(n){if("subimt"===n){var t=o.getFieldsValue();g((0,r.Z)((0,r.Z)((0,r.Z)({},t),v.current),e.current))}else if("onReset"===n){o.resetFields();var a=o.getFieldsValue();g((0,r.Z)((0,r.Z)((0,r.Z)({},a),v.current),e.current))}var i=o.getFieldsValue();d((0,r.Z)((0,r.Z)((0,r.Z)({},i),v.current),e.current))};return(0,x.jsxs)("div",{children:[(0,x.jsx)(L,{form:o,onFinish:y}),(0,x.jsxs)(C.Z,{style:{marginTop:"10px"},children:[(0,x.jsx)(Y,{type:"expenses"}),(0,x.jsx)(b.Z,{rowKey:"key",columns:n,data:l,loading:f,scroll:{x:"100%"}}),(0,x.jsx)(O.Z,{total:u,page:v,onPaginationChange:y})]})]})}}}]);