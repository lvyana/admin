"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[3459],{90501:(e,t,l)=>{l.d(t,{n:()=>n});const n=(e,t,l)=>{const n=JSON.parse(JSON.stringify(e));return n.splice(l,0,...n.splice(t,1)),n}},76623:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Ce});var n=l(72791),a=l(66106),o=l(30914),s=l(15287),r=l(46401),i=l(54261),p=l(1067);const d="input",u="select",c="textArea",m="cascader",y="button",b="formItem",f="GenerateFormItem";var h=l(80184);const g=(0,n.createContext)(null),v={formList:[],selectFormItemKey:void 0},x=(e,t)=>{const{type:l,value:n}=t;return"formList"===l?{...e,formList:n}:"selectFormItemKey"===l?{...e,selectFormItemKey:n}:e},C=e=>{let{children:t}=e;const[l,a]=(0,n.useReducer)(x,v),o=(0,n.useMemo)((()=>({state:l,dispatch:a})),[l]);return(0,h.jsx)(g.Provider,{value:o,children:t})};var j=l(83298);const k=e=>{const t=()=>{const{token:t}=(0,j.Z)(),[l,a]=(0,n.useState)(!1),o=()=>{a(!1)};return(0,h.jsx)(h.Fragment,{children:n.cloneElement(e,{style:{...e.props.style,backgroundColor:l?t.colorPrimaryBg:""},onMouseMove:()=>{l||a(!0)},onMouseLeave:o,onDragEnd:o})})};return(0,h.jsx)(t,{})},Z=[{name:"输入框",type:d},{name:"文本框",type:c},{name:"下拉框",type:u},{name:"联级框",type:m},{name:"按钮集合",type:y}],L=e=>{let{name:t,type:l}=e;const{token:a}=(0,j.Z)(),s=(0,n.useContext)(g),r=null==s?void 0:s.state.formList,[{isDragging:d},u]=(0,p.c)((()=>({type:b,item:{name:l},end:(e,t)=>{const l=t.getDropResult();if(e&&l){const{name:t}=e;let l=r||[];"button"===t?l.push({type:t,name:"name"+(null==r?void 0:r.length),key:(0,i.Z)(),span:24,option:[{name:"确认",type:"ok",btnType:"primary",span:12,permission:"",iconFont:"",id:"0"}]}):l.push({type:t,label:"label",name:"name"+(null==r?void 0:r.length),disabled:!1,key:(0,i.Z)(),isRule:1,span:24,labelCol:6,trigger:"1"}),null==s||s.dispatch({type:"formList",value:l})}},collect:e=>({isDragging:e.isDragging(),handlerId:e.getHandlerId()})})),[r]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(o.Z,{span:12,children:(0,n.useMemo)((()=>k((0,h.jsx)("div",{ref:u,"data-testid":"formItem",className:"rounded-lg p-2 mb-2 border border-solid cursor-pointer",style:{borderColor:a.colorPrimaryBorder},children:t}))),[a])})})},F=()=>{const{token:e}=(0,j.Z)();return(0,h.jsx)("div",{className:"rounded-lg p-2 border-2 border-solid",style:{borderColor:e.colorPrimaryBorder},children:(0,h.jsx)(a.Z,{gutter:16,children:Z.map((e=>(0,h.jsx)(L,{name:e.name,type:e.type},e.type)))})})};var O=l(98422),w=l(83062),I=l(2641),N=l(11532),S=l(23414),P=l(32774),T=l(90501),K=l(29751),R=l(51058);const D=e=>(0,R.ZP)({url:"/dnd/options",method:"get"}),V=(e,t)=>{const l=(0,n.useContext)(g),a=w.Z.useWatch([e],t);(0,n.useEffect)((()=>{if(null!=l&&l.state.selectFormItemKey){const t=l.state.formList.map((t=>(null==l?void 0:l.state.selectFormItemKey)===t.key?{...t,[e]:a}:t));l.dispatch({type:"formList",value:t})}}),[a])},B=()=>({getFormData:e=>{const{type:t,key:l,span:n,label:a,disabled:o,option:s,isRule:r,isRuleTitle:i,rule:p,ruleTitle:d,name:u,labelCol:c}=e;let m={type:t,key:l,span:n,name:u,label:a,comConfig:{label:a,disabled:o,option:s}};return m=2===r?{...m,rules:[{required:!0,message:i}]}:{...m,rules:[{required:!1}]},p&&(m={...m,rules:[...m.rules||[],{validator:(e,t)=>{const l=p&&new RegExp(p.substring(1,p.length-1));return""===t||null==t||""===l||null!=l&&l.test(t)||""===t?Promise.resolve():Promise.reject(new Error(d))}}]}),c&&(m={...m,layout:{labelCol:{span:c},wrapperCol:{span:24-c}}}),m}}),J=e=>{let{formParams:t,index:l}=e;const{token:s}=(0,j.Z)(),r=(0,n.useContext)(g),{getFormData:d}=B(),u=(0,n.useRef)(null),[{handlerId:c},m]=(0,O.L)({accept:f,collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var n;if(!u.current)return;const a=e.index,o=l;if(a===o)return;const s=null===(n=u.current)||void 0===n?void 0:n.getBoundingClientRect(),i=(s.bottom-s.top)/2,p=t.getClientOffset();if(p){const e=p.y-s.top;if(a<o&&e<i)return;if(a>o&&e>i)return}const d=(0,T.n)((null==r?void 0:r.state.formList)||[],o,a);null==r||r.dispatch({type:"formList",value:d||[]}),e.index=o}},[null==r?void 0:r.state.formList]),[{isDragging:y},b,v]=(0,p.c)((()=>({type:f,item:()=>({id:t.key,index:l}),collect:e=>({handlerId:e.getHandlerId(),isDragging:e.isDragging()})})),[l]),x=y?0:1;b(m(u));const[C]=w.Z.useForm(),k=[{...d(t),span:24}];return(0,h.jsxs)(a.Z,{onClick:()=>{t.key!==(null==r?void 0:r.state.selectFormItemKey)&&(null==r||r.dispatch({type:"selectFormItemKey",value:t.key}))},className:"rounded-lg p-4 pb-0 mb-2 border border-solid "+"".concat((null==r?void 0:r.state.selectFormItemKey)===t.key?"shadow-lg":""),style:{opacity:x,height:100,backgroundColor:(null==r?void 0:r.state.selectFormItemKey)===t.key?s.colorPrimaryBg:"",borderColor:s.colorPrimaryBorder},"data-handler-id":c,ref:u,children:[(0,h.jsx)(o.Z,{flex:"auto",children:(0,h.jsx)(P.Z,{form:C,formList:k})}),(0,h.jsxs)("div",{className:"absolute right-0 bottom-1 text-center",children:[(0,h.jsx)(I.ZP,{type:"link",icon:(0,h.jsx)(N.Z,{}),onClick:e=>(e=>{e.stopPropagation();const l=(null==r?void 0:r.state.formList.filter((e=>e.key!==t.key)))||[];null==r||r.dispatch({type:"formList",value:l}),t.key===(null==r?void 0:r.state.selectFormItemKey)&&(null==r||r.dispatch({type:"selectFormItemKey",value:void 0}))})(e)}),(0,h.jsx)(I.ZP,{type:"link",icon:(0,h.jsx)(S.Z,{}),onClick:e=>(e=>{e.stopPropagation();const l=(null==r?void 0:r.state.formList.reduce(((e,l)=>t.key===l.key?[...e,l,{...l,name:"name"+(null==k?void 0:k.length),key:(0,i.Z)()}]:[...e,l]),[]))||[];null==r||r.dispatch({type:"formList",value:l})})(e)})]})]})},E=()=>{const{token:e}=(0,j.Z)(),t=(0,n.useContext)(g),[{isOver:l,canDrop:s},r]=(0,O.L)({accept:b,drop:()=>({name:"GenerateForm"}),collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})});return(0,h.jsx)("div",{ref:r,"data-testid":"GenerateForm",className:"rounded-lg p-2 border-2 border-solid  ",style:{minHeight:500,borderColor:e.colorPrimaryBorder},children:(0,h.jsx)(a.Z,{children:null==t?void 0:t.state.formList.map(((e,t)=>(0,h.jsx)(o.Z,{span:e.span,children:(0,h.jsx)(J,{formParams:e,index:t})},e.key)))})})};var A=l(96230),M=l(79286),q=l(92143),G=l(25285),H=l(35548);const z=e=>{let{options:t,updateOptions:l}=e;const n=e=>{let{options:t,key:l,value:n,id:a}=e;return t.map((e=>e.id===a?{...e,[l]:n}:e))};return(0,h.jsx)(h.Fragment,{children:t.map(((e,s)=>(0,h.jsxs)(a.Z,{children:[(0,h.jsx)(o.Z,{span:8,children:(0,G.Np)({placeholder:"label",value:e.label,onChange:a=>((e,a)=>{const o=n({options:t,key:"label",value:e.target.value,id:a});l(o)})(a,e.id)})}),(0,h.jsx)(o.Z,{span:8,children:(0,G.Np)({placeholder:"value",value:e.value,onChange:a=>((e,a)=>{const o=n({options:t,key:"value",value:e.target.value,id:a});l(o)})(a,e.id)})}),(0,h.jsx)(o.Z,{span:4,children:(0,h.jsx)(H.Z,{option:[{name:"",type:"add",block:!0,btnType:"dashed",iconFont:(0,h.jsx)(M.Z,{}),span:24}],onClick:()=>{(e=>{const n=t.find((t=>t.id===e));n&&l([...t,{...n,id:(0,i.Z)()}])})(e.id)}})}),(0,h.jsx)(o.Z,{span:4,children:(0,h.jsx)(H.Z,{option:[{name:"",type:"subtract",block:!0,btnType:"dashed",iconFont:(0,h.jsx)(q.Z,{}),span:24}],onClick:()=>{(e=>{if(1===t.length)return;const n=t.filter((t=>t.id!==e));l(n)})(e.id)}})})]},e.id)))})};var W=l(70742);const _=[{type:"primary",value:"primary"},{type:"ghost",value:"ghost"},{type:"dashed",value:"dashed"},{type:"link",value:"link"},{type:"text",value:"text"},{type:"default",value:"default"}],Q=e=>{let{options:t,updateOptions:l}=e;const n=(e,n,a)=>{const o=s({options:t,key:n,value:e.target.value,id:a});l(o)},s=e=>{let{options:t,key:l,value:n,id:a}=e;return t.map((e=>e.id===a?{...e,[l]:n}:e))};return(0,h.jsx)(h.Fragment,{children:t.map(((e,r)=>(0,h.jsxs)(a.Z,{className:"m-4",gutter:16,children:[(0,h.jsx)(o.Z,{span:12,children:(0,G.Np)({placeholder:"名字",value:e.name,onChange:t=>n(t,"name",e.id)})}),(0,h.jsx)(o.Z,{span:12,children:(0,G.Np)({placeholder:"标识类型",value:e.type,onChange:t=>n(t,"type",e.id)})}),(0,h.jsx)(o.Z,{span:12,children:(0,W.Q)({placeholder:"组件类型",value:e.btnType,option:_,fieldNames:{label:"type",value:"value"},onChange:n=>((e,n,a)=>{const o=s({options:t,key:n,value:e,id:a});l(o)})(n,"btnType",e.id)})}),(0,h.jsx)(o.Z,{span:12,children:(0,G.Np)({placeholder:"权限标识",value:e.permission,onChange:t=>n(t,"hasPermiss",e.id)})}),(0,h.jsx)(o.Z,{span:12,children:(0,G.Np)({placeholder:"图标",value:e.iconFont,onChange:t=>n(t,"iconFont",e.id)})}),(0,h.jsx)(o.Z,{span:12,children:(0,G.Dx)({placeholder:"span",value:e.span,onChange:n=>((e,n,a)=>{const o=s({options:t,key:n,value:e,id:a});l(o)})(n,"span",e.id)})}),(0,h.jsx)(o.Z,{span:12,children:(0,h.jsx)(H.Z,{option:[{name:"",type:"add",block:!0,btnType:"dashed",iconFont:(0,h.jsx)(M.Z,{}),span:24}],onClick:()=>{(e=>{const n=t.find((t=>t.id===e));n&&l([...t,{...n,id:(0,i.Z)()}])})(e.id)}})}),(0,h.jsx)(o.Z,{span:12,children:(0,h.jsx)(H.Z,{option:[{name:"",type:"subtract",block:!0,btnType:"dashed",iconFont:(0,h.jsx)(q.Z,{}),span:24}],onClick:()=>{(e=>{if(1===t.length)return;const n=t.filter((t=>t.id!==e));l(n)})(e.id)}})})]},e.id)))})},$=(e,t)=>""===t||null==t||/^[_a-zA-Z0-9]+$/.test(t)?Promise.resolve():Promise.reject(new Error("仅由英文字母，数字以及下划线组成")),U=[{label:"启用",value:!1},{label:"禁用",value:!0}],X=[],Y=["select","cascader"],ee=["label","name","labelCol","span","disabled","trigger","staticOptions","url","urlLabel","urlValue","urlBtn","parent","isRule","isRuleTitle","rule","ruleTitle"],te=["input","textArea"],le=["label","name","labelCol","span","disabled","parent","isRule","isRuleTitle","rule","ruleTitle"],ne=["button"],ae=["name","span","button"],oe=[{value:"",label:"",id:(0,i.Z)()}],se=(0,n.memo)((()=>{const{token:e}=(0,j.Z)(),{editItemValue:t}=(()=>{const e=(0,n.useContext)(g);return{editItemValue:t=>{if(null!=e&&e.state.selectFormItemKey){const l=e.state.formList.map((l=>(null==e?void 0:e.state.selectFormItemKey)===l.key?{...l,...t}:l));e.dispatch({type:"formList",value:l})}}}})(),l=(0,n.useContext)(g),[a]=w.Z.useForm(),[o]=(()=>{const e=(0,n.useContext)(g),{run:t}=(0,K.Z)(D,{manual:!0,onSuccess:t=>{const{data:l}=t,n=(null==e?void 0:e.state.formList.map((t=>t.key===e.state.selectFormItemKey?{...t,option:l}:t)))||[];null==e||e.dispatch({type:"formList",value:n})}});return[t]})(),s=(0,n.useMemo)((()=>{const e=null==l?void 0:l.state.formList.filter((e=>e.key!==l.state.selectFormItemKey));return null==e?void 0:e.map((e=>({label:e.label,name:e.name})))}),[null==l?void 0:l.state.formList]),[r,i]=(0,n.useState)("1"),[p,d]=(0,n.useState)(oe),[u,c]=(0,n.useState)(X),{formList:m}=re({staticPattern:r,items:[{key:"1",label:"静态数据"},{key:"2",label:"动态数据"}],onChangeStatic:e=>{i(e),"1"===e?(a.setFieldValue("url",""),a.setFieldValue("urlLabel",""),a.setFieldValue("urlValue","")):"2"===e&&d(oe),t({option:[],trigger:e})},staticOptions:p,updateStaticOptions:e=>{d(e)},onGetOption:async()=>{if("1"===r)t({option:p});else if("2"===r)try{await a.validateFields(["url"]);const e=a.getFieldValue("url");o(e)}catch(e){}},formListLabel:s,buttonOptions:u,updateButtonOptions:e=>{c(e),t({option:e})}}),y=(0,n.useMemo)((()=>{const e=null==l?void 0:l.state.formList.find((e=>e.key===(null==l?void 0:l.state.selectFormItemKey)));return null!=e&&e.type?m.filter((t=>Y.indexOf(null==e?void 0:e.type)>-1?ee.indexOf(t.name)>-1:te.indexOf(null==e?void 0:e.type)>-1?le.indexOf(t.name)>-1:ne.indexOf(null==e?void 0:e.type)>-1?ae.indexOf(t.name)>-1:void 0)):[]}),[null==l?void 0:l.state.selectFormItemKey,null==l?void 0:l.state.formList,p,u]);return(0,n.useEffect)((()=>{if(null!=l&&l.state.selectFormItemKey){const e=l.state.formList.find((e=>(null==l?void 0:l.state.selectFormItemKey)===e.key)),{type:t,span:n,label:o,disabled:s,url:r,parent:p,name:d,rule:u,isRule:m,labelCol:y,trigger:b,urlLabel:f,urlValue:h,option:g}=e||{};a.setFieldsValue({span:n,label:o,disabled:s,url:r,parent:p,name:d,rule:u,isRule:m,labelCol:y,urlLabel:f,urlValue:h,option:g}),b&&i(b),"button"===t&&c(g)}}),[null==l?void 0:l.state.selectFormItemKey]),V("span",a),V("label",a),V("disabled",a),V("url",a),V("parent",a),V("isRule",a),V("isRuleTitle",a),V("rule",a),V("ruleTitle",a),V("name",a),V("labelCol",a),V("urlLabel",a),V("urlValue",a),null!=l&&l.state.selectFormItemKey?(0,h.jsx)("div",{className:"rounded-lg p-2 border-2 border-solid",style:{borderColor:e.colorPrimaryBorder},children:(0,h.jsx)(P.Z,{form:a,formList:y})}):(0,h.jsx)(h.Fragment,{})}));se.displayName="EditForm";const re=e=>{let{staticPattern:t,items:l,onChangeStatic:n,staticOptions:a,updateStaticOptions:o,onGetOption:s,formListLabel:r,buttonOptions:i,updateButtonOptions:p}=e;return{formList:[{type:"input",key:"1",label:"标签",name:"label",span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"input",rules:[{required:!0,message:"请输入数据字段"},{validator:$}],key:"2",label:"数据字段",name:"name",span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"slider",key:"3",label:"label宽度",name:"labelCol",comConfig:{max:24,min:0},span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"slider",key:"4",label:"总宽度",name:"span",comConfig:{max:24,min:6},span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"select",key:"5",label:"是否禁用",name:"disabled",comConfig:{option:U,allowClear:!1},span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"slot",name:"trigger",comConfig:{children:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(A.Z,{activeKey:t,items:l,onChange:n})})},key:"6"},{type:"slot",key:"7777",name:"staticOptions",span:24,show:"1"===t,comConfig:{children:(0,h.jsx)(z,{options:a,updateOptions:o})},layout:{labelCol:{span:0},wrapperCol:{span:24}}},{type:"input",key:"88",label:"",name:"url",comConfig:{placeholder:"请输入url"},rules:[{required:!0,message:"请输入url"}],span:12,show:"2"===t,layout:{labelCol:{span:0},wrapperCol:{span:24}}},{type:"input",key:"98",label:"",name:"urlLabel",comConfig:{placeholder:"label"},rules:[{required:!0,message:"请输入label"}],span:6,show:"2"===t,layout:{labelCol:{span:0},wrapperCol:{span:24}}},{type:"input",key:"108",label:"",name:"urlValue",comConfig:{placeholder:"value"},rules:[{required:!0,message:"请输入value"}],span:6,show:"2"===t,layout:{labelCol:{span:0},wrapperCol:{span:24}}},{type:"slot",key:"11",name:"urlBtn",span:6,comConfig:{children:(0,h.jsx)("div",{className:"flex justify-end",children:(0,h.jsx)(I.ZP,{type:"primary",onClick:s,children:"发送"})})},layout:{labelCol:{span:0},wrapperCol:{span:24}}},{type:"select",key:"12",label:"关联父级",name:"parent",comConfig:{option:r,fieldNames:{label:"label",value:"name"}},span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"radio",name:"isRule",label:"是否必填",rules:[],key:"13",span:24,comConfig:{option:[{value:1,label:"否"},{value:2,label:"是"}],optionType:"button"},layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"textArea",key:"14",label:"是否必填提示语",name:"isRuleTitle",span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"textArea",key:"15",label:"校验规则",name:"rule",span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"textArea",key:"16",label:"校验规则提示语",name:"ruleTitle",span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"slot",key:"button",name:"button",span:24,comConfig:{children:(0,h.jsx)(Q,{options:i,updateOptions:p})},layout:{labelCol:{span:0},wrapperCol:{span:24}}}]}},ie=se;var pe=l(51283),de=l(71939),ue=l.n(de),ce=l(28709);const me=[{label:"dnd格式",value:"dnd"},{label:"标准格式",value:"standard"}],ye=e=>{let{open:t,onOkOrCancel:l,confirmLoading:a}=e;const o=(0,n.useContext)(g),{getFormData:s}=B(),[r,i]=(0,n.useState)([]);(0,n.useEffect)((()=>{t&&c("dnd")}),[t]);let p={name:null,src:r,theme:"rjv-default",iconStyle:"circle",indentWidth:6,collapsed:2,collapseStringsAfterLength:!1,displayDataTypes:!0,displayObjectSize:!0};const[d,u]=(0,n.useState)("dnd"),c=e=>{u(e),"standard"===e?i((null==o?void 0:o.state.formList.map((e=>s(e))))||[]):"dnd"===e&&i((null==o?void 0:o.state.formList)||[])};return(0,h.jsxs)(pe.Z,{title:"json",width:800,open:t,onOkOrCancel:l,confirmLoading:a,children:[(0,h.jsx)(ce.Z,{options:me,value:d,onChange:c}),(0,h.jsx)(ue(),{...p})]})},be=(e,t)=>{if("string"==typeof t)try{let e=JSON.parse(t);return"object"==typeof e&&e?Promise.resolve():Promise.reject("格式不对")}catch(e){return Promise.reject("格式不对")}},fe=e=>{let{form:t,open:l,onOkOrCancel:n,confirmLoading:a}=e;const o=[{type:"textArea",key:"1",label:"JSON",name:"json",comConfig:{autoSize:{minRows:20}},span:24,rules:[{validator:be}],layout:{labelCol:{span:2},wrapperCol:{span:22}}}];return(0,h.jsx)(pe.Z,{width:1e3,title:"导入dnd-json",open:l,onOkOrCancel:n,confirmLoading:a,children:(0,h.jsx)(P.Z,{form:t,formList:o})})},he=e=>{let{form:t,open:l,onOkOrCancel:a,confirmLoading:o}=e;const s=(0,n.useContext)(g),{getFormData:r}=B();return(0,h.jsx)(pe.Z,{width:800,title:"示例",open:l,onOkOrCancel:a,confirmLoading:o,children:(0,h.jsx)(P.Z,{form:t,formList:(null==s?void 0:s.state.formList.map((e=>r(e))))||[]})})};var ge=l(94805);const ve=e=>{let{open:t,onOkOrCancel:l,confirmLoading:a}=e;const o=(0,n.useContext)(g),{getFormData:s}=B();return(0,h.jsx)(pe.Z,{width:1e3,title:"导入dnd-json",open:t,onOkOrCancel:l,confirmLoading:a,children:(0,h.jsxs)(ge.Z,{bordered:!0,children:[(0,h.jsx)("div",{children:"import React, {FC} from 'react';"}),(0,h.jsx)("div",{className:"mb-2",children:"import Iform from '@/antdComponents/iForm';"}),(0,h.jsx)("div",{className:"mb-1 whitespace-pre",children:"const SeachForm: FC<Iprops> = ({ form, onFinish }) => {"}),(0,h.jsx)("div",{style:{whiteSpace:"pre-line"},className:"mb-1 whitespace-pre",children:"  const formList = "+JSON.stringify((null==o?void 0:o.state.formList.map((e=>s(e))))||[],null,2)}),(0,h.jsx)("div",{className:"mb-1 whitespace-pre",children:"  return <Iform form={form} formList={formList}></Iform>;"}),(0,h.jsx)("div",{className:"mb-1 whitespace-pre",children:"};"})]})})},xe=()=>{const e=(0,n.useContext)(g),[t,l]=(0,n.useState)(!1),[a,o]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1),[i,p]=(0,n.useState)(!1),[d]=w.Z.useForm(),[u,c]=(0,n.useState)(!1),[m,y]=(0,n.useState)(!1),[b]=w.Z.useForm(),[f,v]=(0,n.useState)(!1),[x,C]=(0,n.useState)(!1);return(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsx)(H.Z,{option:[{name:"生成示例",type:"template",btnType:"primary"},{name:"生成JSON",type:"JSON",btnType:"primary",className:"ml-1"},{name:"导入JSON",type:"import",btnType:"primary",className:"ml-1"},{name:"生成代码",type:"generatCode",btnType:"primary",className:"ml-1"}],onClick:e=>{"JSON"===e?l(!0):"import"===e?r(!0):"template"===e?c(!0):"generatCode"===e&&v(!0)}}),(0,h.jsx)(ye,{open:t,onOkOrCancel:e=>{l(!1)},confirmLoading:a}),(0,h.jsx)(fe,{open:s,onOkOrCancel:async t=>{if("ok"===t){const t=d.getFieldValue("json");if(!t)return r(!1);try{await d.validateFields();null==e||e.dispatch({type:"formList",value:JSON.parse(t)}),d.resetFields(),r(!1)}catch(e){}}else d.resetFields(),r(!1)},confirmLoading:i,form:d}),(0,h.jsx)(he,{open:u,onOkOrCancel:async e=>{c(!1)},confirmLoading:m,form:b}),(0,h.jsx)(ve,{open:f,onOkOrCancel:e=>{v(!1)},confirmLoading:x})]})},Ce=()=>(0,h.jsx)(ge.Z,{children:(0,h.jsxs)(C,{children:[(0,h.jsx)(xe,{}),(0,h.jsxs)(a.Z,{gutter:8,children:[(0,h.jsxs)(s.W,{backend:r.PD,children:[(0,h.jsx)(o.Z,{span:6,children:(0,h.jsx)(F,{})}),(0,h.jsx)(o.Z,{span:12,children:(0,h.jsx)(E,{})})]}),(0,h.jsx)(o.Z,{span:6,children:(0,h.jsx)(ie,{})})]})]})})}}]);