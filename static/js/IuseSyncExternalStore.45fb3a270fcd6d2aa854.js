"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[7710],{68792:function(e,n,t){t.d(n,{Z:function(){return l}});t(72791);var r=t(16421),o=t(1413),a=t(83298),c=function(e){var n=e.list,t=e.styleConfig,r=e.style,c=e.bordered,i=(0,a.Z)().token,s={marginBottom:24,background:i.colorFillAlter,borderRadius:i.borderRadiusLG,border:"none"};return"1"===t?{list:n.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{style:s})})),style:{background:i.colorBgContainer},bordered:!1}:{list:n,styleConfig:t,style:r,bordered:c}},i=t(80184),s=r.Z.Panel,l=function(e){var n=e.list,t=e.defaultActiveKey,o=e.styleConfig,a=e.bordered,l=void 0===a||a,d=e.onChange,u=e.expandIcon,f=e.style,v=c({list:n,styleConfig:o,style:f,bordered:l});return(0,i.jsx)(r.Z,{bordered:v.bordered,defaultActiveKey:t,onChange:d,expandIcon:u,style:v.style,children:v.list.map((function(e){return(0,i.jsx)(s,{header:e.header,style:e.style,className:e.className,children:e.content},e.key)}))})}},18372:function(e,n,t){t.r(n),t.d(n,{IuseSyncExternalStore:function(){return b},IuseSyncExternalStoreItem:function(){return x},default:function(){return Z}});var r=t(1413),o=t(72791),a=t(37762),c=t(93433),i=0,s=[{id:i++,text:"Todo #1"}],l=[];function d(){var e,n=(0,a.Z)(l);try{for(n.s();!(e=n.n()).done;){(0,e.value)()}}catch(e){n.e(e)}finally{n.f()}}var u={addTodo:function(){s=[].concat((0,c.Z)(s),[{id:i++,text:"Todo #"+i}]),d()},deleteTodo:function(){s=s.filter((function(e,n){return 0!==n})),d()},subscribe:function(e){return l=[].concat((0,c.Z)(l),[e]),function(){l=l.filter((function(n){return n!==e}))}},getSnapshot:function(){return s}},f=t(94805),v=t(83664),h=t(68792),p=t(80184),y={name:"Add todo",type:"key",btnType:"primary"},b=function(){var e=(0,o.useSyncExternalStore)(u.subscribe,u.getSnapshot);return(0,p.jsxs)(f.Z,{children:[(0,p.jsx)(v.E,{buttonItem:y,onClick:function(){return u.addTodo()}}),(0,p.jsx)("hr",{}),(0,p.jsx)("ul",{children:e.map((function(e){return(0,p.jsx)("li",{children:e.text},e.id)}))}),(0,p.jsx)(x,{}),(0,p.jsx)(C,{})]})},x=function(){var e=(0,o.useSyncExternalStore)(u.subscribe,u.getSnapshot);return(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{children:"测试: useSyncExternalStore数据可以共享"}),(0,p.jsx)(v.E,{buttonItem:y,onClick:function(){return u.addTodo()}}),(0,p.jsx)(v.E,{buttonItem:(0,r.Z)((0,r.Z)({},y),{},{name:"delete todo"}),onClick:function(){return u.deleteTodo()}}),(0,p.jsx)("hr",{}),(0,p.jsx)("ul",{children:e.map((function(e){return(0,p.jsx)("li",{children:e.text},e.id)}))})]})},m=[{header:"useSyncExternalStore 参数说明",content:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{children:"useSyncExternalStore(todosStore.subscribe, todosStore.getSnapshot)"}),(0,p.jsx)("div",{children:"subscribe函数得订阅这个store, 并且返回一个可以取消订阅的函数。"}),(0,p.jsx)("div",{children:"getSnapshot函数得可以从store里读取数据快照。"}),(0,p.jsx)("div",{children:"subscribe: 是一个函数，只有一个回调函数作为入参，并且使其订阅这个store. 当store发生改变的时候，这个回调函数应该得到执行，而且这会触发组件的重新渲染。subscribe函数应该返回一个可以取消订阅的方法。"}),(0,p.jsx)("div",{children:"getSnapshot: 是一个函数，返回一个组件中需要用到的store里的一个数据值的快照。当这个store没有改变的时候，重复调用getSnapshot必须返回同样的值。如果store发生改变并且返回的数据值不一样了（用Object.js做比较），那么Reacr重新渲染这个组件。"}),(0,p.jsx)("div",{children:"getServerSnapshot（可选参数）: 是一个函数，返回store数据的初始快照。只会在服务端渲染的时候使用，并且是在服务端渲染好的内容往客户端灌水的时候。服务端的快照必须和客户端的一致。并且通常是序列化后被发送到客户端的，如果你不传这个参数，在服务端渲染的时候会报错"}),(0,p.jsx)("div",{children:"当前你在组件渲染中使用到的store数据的快照"}),(0,p.jsx)("div",{children:"警告"}),(0,p.jsx)("div",{children:"调用getSnapshot返回的这个store数据快照不能修改，如果所依赖的store有可以更改的数据，当数据发生改变返回新的不可修改的数据，否则返回上一次缓存的数据快照。"}),(0,p.jsx)("div",{children:"如果在重新渲染的时候传来一个不同的subscribe函数，React会用新的subscribe重新订阅这个store。你可以通过在组件外面声明subscribe的方式来避免"})]}),key:"1"}],C=function(){return(0,p.jsx)(h.Z,{list:m})},Z=b},23968:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(29439),o=t(93433),a=t(71002),c=t(81694),i=t.n(c),s=t(85501),l=t(75179),d=t(72791),u=t(4942),f=t(87462),v=t(44925),h=t(98568),p=t(11354),y=d.forwardRef((function(e,n){var t,o=e.prefixCls,a=e.forceRender,c=e.className,s=e.style,l=e.children,f=e.isActive,v=e.role,h=d.useState(f||a),p=(0,r.Z)(h,2),y=p[0],b=p[1];return d.useEffect((function(){(a||f)&&b(!0)}),[a,f]),y?d.createElement("div",{ref:n,className:i()("".concat(o,"-content"),(t={},(0,u.Z)(t,"".concat(o,"-content-active"),f),(0,u.Z)(t,"".concat(o,"-content-inactive"),!f),t),c),style:s,role:v},d.createElement("div",{className:"".concat(o,"-content-box")},l)):null}));y.displayName="PanelContent";var b=y,x=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],m=d.forwardRef((function(e,n){var t,r,o=e.showArrow,a=void 0===o||o,c=e.headerClass,s=e.isActive,l=e.onItemClick,y=e.forceRender,m=e.className,C=e.prefixCls,Z=e.collapsible,j=e.accordion,S=e.panelKey,E=e.extra,g=e.header,k=e.expandIcon,I=e.openMotion,N=e.destroyInactivePanel,A=e.children,R=(0,v.Z)(e,x),w="disabled"===Z,P="header"===Z,T="icon"===Z,K=null!=E&&"boolean"!=typeof E,O=function(){null==l||l(S)},M="function"==typeof k?k(e):d.createElement("i",{className:"arrow"});M&&(M=d.createElement("div",{className:"".concat(C,"-expand-icon"),onClick:["header","icon"].includes(Z)?O:void 0},M));var B=i()((t={},(0,u.Z)(t,"".concat(C,"-item"),!0),(0,u.Z)(t,"".concat(C,"-item-active"),s),(0,u.Z)(t,"".concat(C,"-item-disabled"),w),t),m),F={className:i()((r={},(0,u.Z)(r,"".concat(C,"-header"),!0),(0,u.Z)(r,"headerClass",c),(0,u.Z)(r,"".concat(C,"-header-collapsible-only"),P),(0,u.Z)(r,"".concat(C,"-icon-collapsible-only"),T),r)),"aria-expanded":s,"aria-disabled":w,onKeyPress:function(e){"Enter"!==e.key&&e.keyCode!==p.Z.ENTER&&e.which!==p.Z.ENTER||O()}};return P||T||(F.onClick=O,F.role=j?"tab":"button",F.tabIndex=w?-1:0),d.createElement("div",(0,f.Z)({},R,{ref:n,className:B}),d.createElement("div",F,a&&M,d.createElement("span",{className:"".concat(C,"-header-text"),onClick:"header"===Z?O:void 0},g),K&&d.createElement("div",{className:"".concat(C,"-extra")},E)),d.createElement(h.ZP,(0,f.Z)({visible:s,leavedClassName:"".concat(C,"-content-hidden")},I,{forceRender:y,removeOnLeave:N}),(function(e,n){var t=e.className,r=e.style;return d.createElement(b,{ref:n,prefixCls:C,className:t,style:r,isActive:s,forceRender:y,role:j?"tabpanel":void 0},A)})))}));function C(e){var n=e;if(!Array.isArray(n)){var t=(0,a.Z)(n);n="number"===t||"string"===t?[n]:[]}return n.map((function(e){return String(e)}))}var Z=d.forwardRef((function(e,n){var t=e.prefixCls,a=void 0===t?"rc-collapse":t,c=e.destroyInactivePanel,u=void 0!==c&&c,f=e.style,v=e.accordion,h=e.className,p=e.children,y=e.collapsible,b=e.openMotion,x=e.expandIcon,m=e.activeKey,Z=e.defaultActiveKey,j=e.onChange,S=i()(a,h),E=(0,l.Z)([],{value:m,onChange:function(e){return null==j?void 0:j(e)},defaultValue:Z,postState:C}),g=(0,r.Z)(E,2),k=g[0],I=g[1],N=(0,s.Z)(p).map((function(e,n){if(!e)return null;var t=e.key||String(n),r=e.props,c=r.header,i=r.headerClass,s=r.destroyInactivePanel,l=r.collapsible,f=r.onItemClick,h=!1;h=v?k[0]===t:k.indexOf(t)>-1;var p=null!=l?l:y,m={key:t,panelKey:t,header:c,headerClass:i,isActive:h,prefixCls:a,destroyInactivePanel:null!=s?s:u,openMotion:b,accordion:v,children:e.props.children,onItemClick:function(e){"disabled"!==p&&(!function(e){I((function(){return v?k[0]===e?[]:[e]:k.indexOf(e)>-1?k.filter((function(n){return n!==e})):[].concat((0,o.Z)(k),[e])}))}(e),null==f||f(e))},expandIcon:x,collapsible:p};return"string"==typeof e.type?e:(Object.keys(m).forEach((function(e){void 0===m[e]&&delete m[e]})),d.cloneElement(e,m))}));return d.createElement("div",{ref:n,className:S,style:f,role:v?"tablist":void 0},N)})),j=Object.assign(Z,{Panel:m}),S=j;j.Panel}}]);