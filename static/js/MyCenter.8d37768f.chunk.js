"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[439],{34095:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var r=t(72791),n=t(94805),i=t(15255),o=t(21940),a=t(49367),l=t(11142),d=t(64957),c=(t(15580),t(19689)),u=t(80184);const p=e=>{let{updatepPhoto:s,setPhotoFinish:t}=e;const n=(0,r.useRef)(null),[i,o]=(0,r.useState)(!0);return(0,u.jsx)(c.Z,{spinning:i,children:(0,u.jsx)(d.Z,{src:s,style:{height:400,width:"100%"},initialAspectRatio:16/9,guides:!1,crop:()=>{const e=null==n?void 0:n.current,s=null==e?void 0:e.cropper;t(s.getCroppedCanvas().toDataURL()),o(!1)},ref:n})})};var h=t(66106),x=t(30914),j=t(26259),m=t(2641),Z=t(72351);const f=e=>{let{photoFinish:s,setPhotoFinish:t}=e;const[n,i]=(0,r.useState)(s);return(0,u.jsxs)("div",{children:[(0,u.jsxs)(h.Z,{gutter:20,align:"bottom",children:[(0,u.jsx)(x.Z,{span:16,children:(0,u.jsx)(p,{updatepPhoto:n,setPhotoFinish:t})}),(0,u.jsx)(x.Z,{span:8,children:(0,u.jsx)(a.C,{src:s,size:200,icon:(0,u.jsx)(l.Z,{})})})]}),(0,u.jsx)("div",{style:{marginTop:"10px"},children:(0,u.jsx)(j.default,{name:"file",showUploadList:!1,beforeUpload:function(e){return v(e,(e=>{i(e)})),!1},children:(0,u.jsx)(m.ZP,{icon:(0,u.jsx)(Z.Z,{}),children:"上传头像"})})})]})},v=(e,s)=>{const t=new FileReader;t.addEventListener("load",(()=>s(t.result))),t.readAsDataURL(e)};var P=t(57689),g=t(83062),F=t(19829);const w=()=>{const e=(0,P.TH)(),[s]=g.Z.useForm();(0,r.useEffect)((()=>{var t;e.state?s.setFieldsValue({userName:null===(t=e.state)||void 0===t?void 0:t.name}):s.setFieldsValue({userName:void 0})}),[s,e]);return(0,u.jsxs)(g.Z,{form:s,labelCol:{span:4,offset:4},wrapperCol:{span:12},onFinish:e=>{},onFinishFailed:e=>{},children:[(0,u.jsx)(g.Z.Item,{label:"用户名",name:"userName",rules:[{required:!0,message:"Please input your username!"}],children:(0,u.jsx)(F.Z,{})}),(0,u.jsx)(g.Z.Item,{label:"密码",name:"passWord",rules:[{required:!0,message:"Please input your password!"}],children:(0,u.jsx)(F.Z.Password,{})}),(0,u.jsx)(g.Z.Item,{label:"确认密码",name:"confirmPassWord",rules:[{required:!0,message:"Please input your confirm password!"},{validator:(e,t)=>t&&t!==s.getFieldValue("passWord")?Promise.reject(new Error("密码不一致")):Promise.resolve()}],children:(0,u.jsx)(F.Z.Password,{})}),(0,u.jsx)(g.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,u.jsx)(m.ZP,{type:"primary",htmlType:"submit",children:"Submit"})})]})};var C=t(51283);const b=()=>{const e=(0,i.TL)(),[s,t]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),p=(0,i.CG)(o.MM),[h,x]=(0,r.useState)(p);return(0,u.jsxs)(n.Z,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{style:{marginBottom:"20px",textAlign:"center"},children:(0,u.jsx)("span",{onClick:()=>{x(p),t(!0)},children:(0,u.jsx)(a.C,{src:p,size:200,icon:(0,u.jsx)(l.Z,{})})})}),(0,u.jsx)(w,{})]}),(0,u.jsx)(C.Z,{title:"修改头像",open:s,confirmLoading:d,onOk:()=>{c(!0),setTimeout((()=>{e((0,o._d)(h)),t(!1),c(!1)}),1e3)},onCancel:()=>{t(!1)},width:800,children:(0,u.jsx)(f,{photoFinish:h,setPhotoFinish:x})})]})}}}]);