"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[9544],{75325:function(t,n,e){e.d(n,{Z:function(){return y}});var i=e(29439),u=e(72791),s=e(74165),o=e(15671),c=e(43144),r=function(){function t(n,e,i,u){(0,o.Z)(this,t),l(n),h(n),this.obj=n,this.input="string"==typeof e?[e]:e,this.fn="function"==typeof i?i:function(){},this.hooks="function"==typeof u?u:function(){},this.timer=0,this.typeAction={rollback:this.typedBack.bind(this),normal:this.play.bind(this),custom:this.fn},this.init()}return(0,c.Z)(t,[{key:"init",value:function(){this.play()}},{key:"play",value:function(){var t=this;if(!this.input.length)return this.fn(this);var n=0,e=!1,i=this.input.shift()||"";this.timer=setInterval((function(){return n===i.length&&(n=0,e=!0,t.closeTimer()),t.obj.isEnd?t.closeTimer():e?t.nextTick():(t.obj.output=i.slice(0,n+1),t.hooks(i.slice(0,n+1),t),void n++)}),this.obj.speed)}},{key:"typedBack",value:function(){var t=this;if(!this.input.length&&this.obj.sentencePause)return this.fn(this);var n=this.obj.output,e=n.length,i=!1;this.timer=setInterval((function(){return-1===e&&(t.obj.output="",t.hooks("",t),e=0,i=!0,t.closeTimer()),t.obj.isEnd?(t.closeTimer(),t.obj.singleBack=!1):i?(t.obj.singleBack=!1,t.input.length?t.play():t.fn(t)):(t.obj.output=n.slice(0,e+1),t.hooks(n.slice(0,e+1),t),void e--)}),this.obj.backSpeed)}},{key:"nextTick",value:function(){return t=this,n=void 0,e=void 0,i=(0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sleep(this.obj.sleep);case 2:return t.abrupt("return",this.obj.singleBack?this.typedBack():this.getOutputType());case 3:case"end":return t.stop()}}),t,this)})),new(e||(e=Promise))((function(u,s){function o(t){try{r(i.next(t))}catch(t){s(t)}}function c(t){try{r(i.throw(t))}catch(t){s(t)}}function r(t){var n;t.done?u(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,c)}r((i=i.apply(t,n||[])).next())}));var t,n,e,i}},{key:"getOutputType",value:function(){return this.typeAction[this.obj.type](this)}},{key:"closeTimer",value:function(){clearInterval(this.timer)}},{key:"sleep",value:function(t){return new Promise((function(n){return setTimeout(n,t)}))}},{key:"close",value:function(){return this.obj.isEnd=!0}}]),t}(),a=function(t){throw new Error(t)},l=function(t){var n=Object.keys({output:"",type:"",isEnd:!1,speed:80,backSpeed:40,sleep:3e3,singleBack:!1,sentencePause:!1}),e=Object.keys(t);n.length!==e.length&&a("配置对象错误: 字段数量不正确！"),n.forEach((function(n){void 0!==t[n]&&null!==t[n]||a("配置对象错误：字段值为null或undefined！")}))},h=function(t){Object.keys(t).forEach((function(n){var e=f[n](t);e.check()&&e.showTip(n)}))},f={output:function(t){return new p("string",t.output)},type:function(t){return new p("string",t.type)},isEnd:function(t){return new p("boolean",t.isEnd)},speed:function(t){return new p("number",t.speed)},backSpeed:function(t){return new p("number",t.backSpeed)},sleep:function(t){return new p("number",t.sleep)},singleBack:function(t){return new p("boolean",t.singleBack)},sentencePause:function(t){return new p("boolean",t.sentencePause)}},p=function(){function t(n,e){(0,o.Z)(this,t),this.type=n,this.field=e}return(0,c.Z)(t,[{key:"check",value:function(){return typeof this.field!=="".concat(this.type)}},{key:"showTip",value:function(t){a("配置对象错误：属性 ".concat(t," 必须为 ").concat(this.type," 类型！"))}}]),t}(),d=r,y=function(t){var n=(0,u.useState)(""),e=(0,i.Z)(n,2),s=e[0],o=e[1],c=(0,u.useState)(null),r=(0,i.Z)(c,2),a=r[0],l=r[1];(0,u.useLayoutEffect)((function(){return h(),function(){null==a||a.close()}}),[]);var h=function(){var n=new d({output:"",isEnd:!1,speed:80,singleBack:!1,sleep:0,type:"normal",backSpeed:40,sentencePause:!1},t,f,p);l(n)},f=function(){},p=function(t){o(t)};return{output:s}}},65531:function(t,n,e){e.r(n);var i=e(29439),u=e(72791),s=e(87309),o=e(54164),c=e(75325),r=e(94805),a=e(80184);n.default=function(){var t=(0,c.Z)("flushSync：可以将回调函数中的更新任务， 放到一个较高级的优先级中，适用于强制刷新，同时确保了DOM会被立即更新").output,n=(0,u.useState)(0),e=(0,i.Z)(n,2),l=e[0],h=e[1];return(0,a.jsxs)(r.Z,{children:[(0,a.jsxs)("div",{children:[" ",t]}),(0,a.jsxs)("div",{style:{padding:20},children:[(0,a.jsxs)("div",{children:["数字: ",l]}),(0,a.jsx)(s.ZP,{color:"primary",onClick:function(){h(1),(0,o.flushSync)((function(){h(2)})),h(3)},children:"点击"})]})]})}}}]);
//# sourceMappingURL=IflushSync.e302c78c50d0e51c31cd.js.map