"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[3459],{90501:(e,t,l)=>{l.d(t,{n:()=>o});const o=(e,t,l)=>{const o=JSON.parse(JSON.stringify(e));return o.splice(l,0,...o.splice(t,1)),o}},76623:(e,t,l)=>{l.r(t),l.d(t,{default:()=>xe});var o=l(72791),n=l(66106),a=l(30914),s=l(15287),r=l(46401),i=l(54261),p=l(1067);const m="input",c="select",d="textArea",u="cascader",y="button",f="formItem",g="GenerateFormItem";var h=l(80184);const b=(0,o.createContext)(null),C=(e,t)=>{const{type:l,value:o}=t;return"formList"===l?{...e,formList:o}:"selectFormItemKey"===l?{...e,selectFormItemKey:o}:e},v=e=>{let{children:t}=e;const l={formList:[],selectFormItemKey:void 0},[n,a]=(0,o.useReducer)(C,l),s=(0,o.useMemo)((()=>({state:n,dispatch:a})),[n]);return(0,h.jsx)(b.Provider,{value:s,children:t})};var x=l(83298);const j=e=>{const t=()=>{const{token:t}=(0,x.Z)(),[l,n]=(0,o.useState)(!1),a=()=>{n(!1)};return(0,h.jsx)(h.Fragment,{children:o.cloneElement(e,{style:{...e.props.style,backgroundColor:l?t.colorPrimaryBg:""},onMouseMove:()=>{l||n(!0)},onMouseLeave:a,onDragEnd:a})})};return(0,h.jsx)(t,{})},k=[{name:"输入框",type:m},{name:"文本框",type:d},{name:"下拉框",type:c},{name:"联级框",type:u},{name:"按钮集合",type:y}],Z=e=>{let{name:t,type:l}=e;const{token:n}=(0,x.Z)(),s=(0,o.useContext)(b),r=null==s?void 0:s.state.formList,[{isDragging:m},c]=(0,p.c)((()=>({type:f,item:{name:l},end:(e,t)=>{const l=t.getDropResult();if(e&&l){const{name:t}=e;let l=r||[];"button"===t?l.push({type:t,name:"name"+(null==r?void 0:r.length),key:(0,i.Z)(),span:24,options:[{comConfig:{name:"确认",type:"primary",icon:""},tag:"ok",span:12,permission:""}]}):l.push({type:t,label:"label",placeholder:"请输入label",name:"name"+(null==r?void 0:r.length),disabled:!1,key:(0,i.Z)(),isRule:1,span:24,labelCol:6,trigger:"1"}),null==s||s.dispatch({type:"formList",value:l})}},collect:e=>({isDragging:e.isDragging(),handlerId:e.getHandlerId()})})),[r]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(a.Z,{span:12,children:(0,o.useMemo)((()=>j((0,h.jsx)("div",{ref:c,"data-testid":"formItem",className:"rounded-lg p-2 mb-2 border border-solid cursor-pointer",style:{borderColor:n.colorPrimaryBorder},children:t}))),[n])})})},L=()=>{const{token:e}=(0,x.Z)();return(0,h.jsx)("div",{className:"rounded-lg p-2 border-2 border-solid",style:{borderColor:e.colorPrimaryBorder},children:(0,h.jsx)(n.Z,{gutter:16,children:k.map((e=>(0,h.jsx)(Z,{name:e.name,type:e.type},e.type)))})})};var I=l(98422),F=l(83062),P=l(2641),O=l(11532),w=l(23414),N=l(70885),S=l(90501),K=l(29751),R=l(51058);const D=e=>(0,R.ZP)({url:"/dnd/options",method:"get"}),V=(e,t)=>{const l=(0,o.useContext)(b),n=F.Z.useWatch([e],t);(0,o.useEffect)((()=>{if(null!=l&&l.state.selectFormItemKey){const t=l.state.formList.map((t=>(null==l?void 0:l.state.selectFormItemKey)===t.key?{...t,[e]:n}:t));l.dispatch({type:"formList",value:t})}}),[n])},B=()=>({getFormData:e=>{const{type:t,key:l,span:o,label:n,isRule:a,isRuleTitle:s,rule:r,ruleTitle:i,name:p,labelCol:m}=e;let c={type:t,key:l,span:o,formItemProps:{name:p,label:n,labelCol:{span:m},wrapperCol:{span:24-(m||0)},rules:[{required:2===a,message:s},{validator:(e,t)=>{if(r){const e=r&&new RegExp(r.substring(1,r.length-1));return""===t||null==t||""===e||null!=e&&e.test(t)||""===t?Promise.resolve():Promise.reject(new Error(i))}return Promise.resolve()}}]},comConfig:{}};if("button"===c.type){const{options:t}=e;return{...c,comConfig:{options:t}}}if("select"===c.type){const{options:t,disabled:l,placeholder:o}=e;return{...c,comConfig:{options:t,disabled:l,placeholder:o}}}if("cascader"===c.type){const{options:t,disabled:l,placeholder:o}=e;return{...c,comConfig:{disabled:l,options:t,placeholder:o}}}if("input"===c.type){const{disabled:t,placeholder:l}=e;return{...c,comConfig:{disabled:t,placeholder:l}}}return c}}),T=e=>{let{formParams:t,index:l}=e;const{token:s}=(0,x.Z)(),r=(0,o.useContext)(b),{getFormData:m}=B(),c=(0,o.useRef)(null),[{handlerId:d},u]=(0,I.L)({accept:g,collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var o;if(!c.current)return;const n=e.index,a=l;if(n===a)return;const s=null===(o=c.current)||void 0===o?void 0:o.getBoundingClientRect(),i=(s.bottom-s.top)/2,p=t.getClientOffset();if(p){const e=p.y-s.top;if(n<a&&e<i)return;if(n>a&&e>i)return}const m=(0,S.n)((null==r?void 0:r.state.formList)||[],a,n);null==r||r.dispatch({type:"formList",value:m||[]}),e.index=a}},[null==r?void 0:r.state.formList]),[{isDragging:y},f,C]=(0,p.c)((()=>({type:g,item:()=>({id:t.key,index:l}),collect:e=>({handlerId:e.getHandlerId(),isDragging:e.isDragging()})})),[l]),v=y?0:1;f(u(c));const[j]=F.Z.useForm(),k=[{...m(t),span:24}];return(0,h.jsxs)(n.Z,{onClick:()=>{t.key!==(null==r?void 0:r.state.selectFormItemKey)&&(null==r||r.dispatch({type:"selectFormItemKey",value:t.key}))},className:"rounded-lg p-4 pb-0 mb-2 border border-solid "+"".concat((null==r?void 0:r.state.selectFormItemKey)===t.key?"shadow-lg":""),style:{opacity:v,height:100,backgroundColor:(null==r?void 0:r.state.selectFormItemKey)===t.key?s.colorPrimaryBg:"",borderColor:s.colorPrimaryBorder},"data-handler-id":d,ref:c,children:[(0,h.jsx)(a.Z,{flex:"auto",children:(0,h.jsx)(N.Z,{formProps:{form:j},formList:k})}),(0,h.jsxs)("div",{className:"absolute right-0 bottom-1 text-center",children:[(0,h.jsx)(P.ZP,{type:"link",icon:(0,h.jsx)(O.Z,{}),onClick:e=>(e=>{e.stopPropagation();const l=(null==r?void 0:r.state.formList.filter((e=>e.key!==t.key)))||[];null==r||r.dispatch({type:"formList",value:l}),t.key===(null==r?void 0:r.state.selectFormItemKey)&&(null==r||r.dispatch({type:"selectFormItemKey",value:void 0}))})(e)}),(0,h.jsx)(P.ZP,{type:"link",icon:(0,h.jsx)(w.Z,{}),onClick:e=>(e=>{e.stopPropagation();const l=(null==r?void 0:r.state.formList.reduce(((e,l)=>t.key===l.key?[...e,l,{...l,name:"name"+(null==k?void 0:k.length),key:(0,i.Z)()}]:[...e,l]),[]))||[];null==r||r.dispatch({type:"formList",value:l})})(e)})]})]})},J=()=>{const{token:e}=(0,x.Z)(),t=(0,o.useContext)(b),[{isOver:l,canDrop:s},r]=(0,I.L)({accept:f,drop:()=>({name:"GenerateForm"}),collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})});return(0,h.jsx)("div",{ref:r,"data-testid":"GenerateForm",className:"rounded-lg p-2 border-2 border-solid  ",style:{minHeight:500,borderColor:e.colorPrimaryBorder},children:(0,h.jsx)(n.Z,{children:null==t?void 0:t.state.formList.map(((e,t)=>(0,h.jsx)(a.Z,{span:e.span,children:(0,h.jsx)(T,{formParams:e,index:t})},e.key)))})})};var E=l(96230),A=l(79286),M=l(92143),q=l(25285),G=l(95568);const H=e=>{let{options:t,updateOptions:l}=e;const o=e=>{let{options:t,key:l,value:o,id:n}=e;return t.map((e=>e.id===n?{...e,[l]:o}:e))};return(0,h.jsx)(h.Fragment,{children:t.map(((e,s)=>(0,h.jsxs)(n.Z,{children:[(0,h.jsx)(a.Z,{span:8,children:(0,q.Np)({placeholder:"label",value:e.label,onChange:n=>((e,n)=>{const a=o({options:t,key:"label",value:e.target.value,id:n});l(a)})(n,e.id)})}),(0,h.jsx)(a.Z,{span:8,children:(0,q.Np)({placeholder:"value",value:e.value,onChange:n=>((e,n)=>{const a=o({options:t,key:"value",value:e.target.value,id:n});l(a)})(n,e.id)})}),(0,h.jsx)(a.Z,{span:4,children:(0,h.jsx)(G.Z,{block:!0,type:"dashed",icon:(0,h.jsx)(A.Z,{}),onClick:()=>{(e=>{const o=t.find((t=>t.id===e));o&&l([...t,{...o,id:(0,i.Z)()}])})(e.id)}})}),(0,h.jsx)(a.Z,{span:4,children:(0,h.jsx)(G.Z,{name:"",block:!0,type:"dashed",icon:(0,h.jsx)(M.Z,{}),onClick:()=>{(e=>{if(1===t.length)return;const o=t.filter((t=>t.id!==e));l(o)})(e.id)}})})]},e.id)))})};var z=l(70742);const W=[{type:"primary",value:"primary"},{type:"ghost",value:"ghost"},{type:"dashed",value:"dashed"},{type:"link",value:"link"},{type:"text",value:"text"},{type:"default",value:"default"}],_=e=>{let{options:t,updateOptions:l}=e;const o=(e,o,n)=>{const a=s({options:t,key:o,value:e.target.value,tag:n});l(a)},s=e=>{let{options:t,key:l,value:o,tag:n}=e;return t.map((e=>e.tag===n?["permission","tag","span"].indexOf(l)>-1?{...e,[l]:o}:{...e,comConfig:{...e.comConfig,[l]:o}}:e))};return(0,h.jsx)(h.Fragment,{children:t.map(((e,r)=>(0,h.jsxs)(n.Z,{className:"m-4",gutter:16,children:[(0,h.jsx)(a.Z,{span:12,children:(0,q.Np)({placeholder:"名字",value:e.comConfig.name,onChange:t=>o(t,"name",e.tag)})}),(0,h.jsx)(a.Z,{span:12,children:(0,q.Np)({placeholder:"标识类型",value:e.tag,onChange:t=>o(t,"tag",e.tag)})}),(0,h.jsx)(a.Z,{span:12,children:(0,z.Z)({placeholder:"组件类型",value:e.comConfig.type,options:W,fieldNames:{label:"type",value:"value"},onChange:o=>((e,o,n)=>{const a=s({options:t,key:o,value:e,tag:n});l(a)})(o,"type",e.tag)})}),(0,h.jsx)(a.Z,{span:12,children:(0,q.Np)({placeholder:"权限标识",value:e.permission,onChange:t=>o(t,"permission",e.tag)})}),(0,h.jsx)(a.Z,{span:12,children:(0,q.Np)({placeholder:"图标",value:e.comConfig.icon,onChange:t=>o(t,"icon",e.tag)})}),(0,h.jsx)(a.Z,{span:12,children:(0,q.Dx)({placeholder:"span",value:e.span,onChange:o=>((e,o,n)=>{const a=s({options:t,key:o,value:e,tag:n});l(a)})(o,"span",e.tag)})}),(0,h.jsx)(a.Z,{span:12,children:(0,h.jsx)(G.Z,{name:"",block:!0,type:"dashed",icon:(0,h.jsx)(A.Z,{}),onClick:()=>{(e=>{const o=t.find((t=>t.tag===e));o&&l([...t,{...o,tag:(0,i.Z)()}])})(e.tag)}})}),(0,h.jsx)(a.Z,{span:12,children:(0,h.jsx)(G.Z,{name:"",block:!0,type:"dashed",icon:(0,h.jsx)(M.Z,{}),onClick:()=>{(e=>{if(1===t.length)return;const o=t.filter((t=>t.tag!==e));l(o)})(e.tag)}})})]},r)))})},$=(e,t)=>""===t||null==t||/^[_a-zA-Z0-9]+$/.test(t)?Promise.resolve():Promise.reject(new Error("仅由英文字母，数字以及下划线组成")),Q=[{label:"启用",value:!1},{label:"禁用",value:!0}],U=[],X=["select","cascader"],Y=["label","placeholder","name","labelCol","span","disabled","trigger","staticOptions","url","urlLabel","urlValue","urlBtn","parent","isRule","isRuleTitle","rule","ruleTitle"],ee=["input","textArea"],te=["label","placeholder","name","labelCol","span","disabled","parent","isRule","isRuleTitle","rule","ruleTitle"],le=["button"],oe=["name","span","button"],ne=[{value:"",label:"",id:(0,i.Z)()}],ae=(0,o.memo)((()=>{const{token:e}=(0,x.Z)(),{editItemValue:t}=(()=>{const e=(0,o.useContext)(b);return{editItemValue:t=>{if(null!=e&&e.state.selectFormItemKey){const l=e.state.formList.map((l=>(null==e?void 0:e.state.selectFormItemKey)===l.key?{...l,...t}:l));e.dispatch({type:"formList",value:l})}}}})(),l=(0,o.useContext)(b),[n]=F.Z.useForm(),[a]=(()=>{const e=(0,o.useContext)(b),{run:t}=(0,K.Z)(D,{manual:!0,onSuccess:t=>{const{data:l}=t,o=(null==e?void 0:e.state.formList.map((t=>t.key===e.state.selectFormItemKey?{...t,option:l}:t)))||[];null==e||e.dispatch({type:"formList",value:o})}});return[t]})(),s=(0,o.useMemo)((()=>{const e=null==l?void 0:l.state.formList.filter((e=>e.key!==l.state.selectFormItemKey));return null==e?void 0:e.map((e=>({label:e.label,name:e.name})))}),[null==l?void 0:l.state.formList]),[r,i]=(0,o.useState)("1"),[p,m]=(0,o.useState)(ne),[c,d]=(0,o.useState)(U),{formList:u}=se({staticPattern:r,items:[{key:"1",label:"静态数据"},{key:"2",label:"动态数据"}],onChangeStatic:e=>{i(e),"1"===e?(n.setFieldValue("url",""),n.setFieldValue("urlLabel",""),n.setFieldValue("urlValue","")):"2"===e&&m(ne),t({options:[],trigger:e})},staticOptions:p,updateStaticOptions:e=>{m(e)},onGetOption:async()=>{if("1"===r)t({options:p});else if("2"===r)try{await n.validateFields(["url"]);const e=n.getFieldValue("url");a(e)}catch(e){}},formListLabel:s,buttonOptions:c,updateButtonOptions:e=>{d(e),t({options:e})}}),y=(0,o.useMemo)((()=>{const e=null==l?void 0:l.state.formList.find((e=>e.key===(null==l?void 0:l.state.selectFormItemKey)));return null!=e&&e.type?u.filter((t=>{const{name:l}=t.formItemProps||{};return X.indexOf(null==e?void 0:e.type)>-1?Y.indexOf(l)>-1:ee.indexOf(null==e?void 0:e.type)>-1?te.indexOf(l)>-1:le.indexOf(null==e?void 0:e.type)>-1?oe.indexOf(l)>-1:void 0})):[]}),[null==l?void 0:l.state.selectFormItemKey,null==l?void 0:l.state.formList,p,c]);return(0,o.useEffect)((()=>{if(null!=l&&l.state.selectFormItemKey){const e=l.state.formList.find((e=>(null==l?void 0:l.state.selectFormItemKey)===e.key)),{type:t,span:o,label:a,placeholder:s,disabled:r,url:p,parent:m,name:c,rule:u,isRule:y,labelCol:f,trigger:g,urlLabel:h,urlValue:b,options:C}=e||{};n.setFieldsValue({span:o,label:a,placeholder:s,disabled:r,url:p,parent:m,name:c,rule:u,isRule:y,labelCol:f,urlLabel:h,urlValue:b,options:C}),g&&i(g),"button"===t&&d(C)}}),[null==l?void 0:l.state.selectFormItemKey]),V("span",n),V("label",n),V("placeholder",n),V("disabled",n),V("url",n),V("parent",n),V("isRule",n),V("isRuleTitle",n),V("rule",n),V("ruleTitle",n),V("name",n),V("labelCol",n),V("urlLabel",n),V("urlValue",n),null!=l&&l.state.selectFormItemKey?(0,h.jsx)("div",{className:"rounded-lg p-2 border-2 border-solid",style:{borderColor:e.colorPrimaryBorder},children:(0,h.jsx)(N.Z,{formProps:{form:n},formList:y})}):(0,h.jsx)(h.Fragment,{})}));ae.displayName="EditForm";const se=e=>{let{staticPattern:t,items:l,onChangeStatic:o,staticOptions:n,updateStaticOptions:a,onGetOption:s,formListLabel:r,buttonOptions:i,updateButtonOptions:p}=e;return{formList:[{type:"input",key:"1",span:24,formItemProps:{label:"标签",name:"label",labelCol:{span:6},wrapperCol:{span:18}}},{type:"input",key:"122",span:24,formItemProps:{label:"placeholder",name:"placeholder",labelCol:{span:6},wrapperCol:{span:18}}},{type:"input",key:"2",span:24,formItemProps:{label:"数据字段",name:"name",rules:[{required:!0,message:"请输入数据字段"},{validator:$}],labelCol:{span:6},wrapperCol:{span:18}}},{type:"slider",key:"3",comConfig:{max:24,min:0},span:24,formItemProps:{label:"label宽度",name:"labelCol",labelCol:{span:6},wrapperCol:{span:18}}},{type:"slider",key:"4",comConfig:{max:24,min:6},span:24,formItemProps:{label:"总宽度",name:"span",labelCol:{span:6},wrapperCol:{span:18}}},{type:"select",key:"5",comConfig:{options:Q,allowClear:!1},span:24,formItemProps:{label:"是否禁用",name:"disabled",labelCol:{span:6},wrapperCol:{span:18}}},{type:"slot",comConfig:{children:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(E.Z,{activeKey:t,items:l,onChange:o})})},key:"6"},{type:"slot",key:"7777",span:24,show:"1"===t,comConfig:{children:(0,h.jsx)(H,{options:n,updateOptions:a})},formItemProps:{name:"staticOptions",labelCol:{span:0},wrapperCol:{span:24}}},{type:"input",key:"88",comConfig:{placeholder:"请输入url"},span:12,show:"2"===t,formItemProps:{label:"",name:"url",rules:[{required:!0,message:"请输入url"}],labelCol:{span:0},wrapperCol:{span:24}}},{type:"input",key:"98",comConfig:{placeholder:"label"},span:6,show:"2"===t,formItemProps:{label:"",name:"urlLabel",rules:[{required:!0,message:"请输入label"}],labelCol:{span:0},wrapperCol:{span:24}}},{type:"input",key:"108",comConfig:{placeholder:"value"},span:6,show:"2"===t,formItemProps:{label:"",name:"urlValue",rules:[{required:!0,message:"请输入value"}],labelCol:{span:0},wrapperCol:{span:24}}},{type:"slot",key:"11",span:6,comConfig:{children:(0,h.jsx)("div",{className:"flex justify-end",children:(0,h.jsx)(P.ZP,{type:"primary",onClick:s,children:"发送"})})},formItemProps:{name:"urlBtn",labelCol:{span:0},wrapperCol:{span:24}}},{type:"select",key:"12",comConfig:{options:r,fieldNames:{label:"label",value:"name"}},span:24,formItemProps:{label:"关联父级",name:"parent",labelCol:{span:6},wrapperCol:{span:18}}},{type:"radio",key:"13",span:24,comConfig:{options:[{value:1,label:"否"},{value:2,label:"是"}],optionType:"button"},formItemProps:{name:"isRule",label:"是否必填",rules:[],labelCol:{span:6},wrapperCol:{span:18}}},{type:"textArea",key:"14",span:24,formItemProps:{label:"是否必填提示语",name:"isRuleTitle",labelCol:{span:6},wrapperCol:{span:18}}},{type:"textArea",key:"15",span:24,formItemProps:{label:"校验规则",name:"rule",labelCol:{span:6},wrapperCol:{span:18}}},{type:"textArea",key:"16",span:24,formItemProps:{label:"校验规则提示语",name:"ruleTitle",labelCol:{span:6},wrapperCol:{span:18}}},{type:"slot",key:"button",span:24,comConfig:{children:(0,h.jsx)(_,{options:i,updateOptions:p})},formItemProps:{name:"button",labelCol:{span:0},wrapperCol:{span:24}}}]}},re=ae;var ie=l(35548),pe=l(51283),me=l(71939),ce=l.n(me),de=l(28709);const ue=[{label:"dnd格式",value:"dnd"},{label:"标准格式",value:"standard"}],ye=e=>{let{open:t,onOk:l,onCancel:n,confirmLoading:a}=e;const s=(0,o.useContext)(b),{getFormData:r}=B(),[i,p]=(0,o.useState)([]);(0,o.useEffect)((()=>{t&&u("dnd")}),[t]);let m={name:null,src:i,theme:"rjv-default",iconStyle:"circle",indentWidth:6,collapsed:2,collapseStringsAfterLength:!1,displayDataTypes:!0,displayObjectSize:!0};const[c,d]=(0,o.useState)("dnd"),u=e=>{d(e),"standard"===e?p((null==s?void 0:s.state.formList.map((e=>r(e))))||[]):"dnd"===e&&p((null==s?void 0:s.state.formList)||[])};return(0,h.jsxs)(pe.Z,{title:"json",width:800,open:t,onOk:l,onCancel:n,confirmLoading:a,children:[(0,h.jsx)(de.Z,{options:ue,value:c,onChange:u}),(0,h.jsx)(ce(),{...m})]})},fe=(e,t)=>{if("string"==typeof t)try{let e=JSON.parse(t);return"object"==typeof e&&e?Promise.resolve():Promise.reject("格式不对")}catch(e){return Promise.reject("格式不对")}},ge=e=>{let{form:t,open:l,onOk:o,onCancel:n,confirmLoading:a}=e;const s=[{type:"textArea",key:"1",comConfig:{autoSize:{minRows:20}},span:24,formItemProps:{label:"JSON",name:"json",rules:[{validator:fe}],labelCol:{span:2},wrapperCol:{span:22}}}];return(0,h.jsx)(pe.Z,{width:1e3,title:"导入dnd-json",open:l,onOk:o,onCancel:n,confirmLoading:a,children:(0,h.jsx)(N.Z,{formProps:{form:t},formList:s})})},he=e=>{let{form:t,open:l,onOk:n,onCancel:a,confirmLoading:s}=e;const r=(0,o.useContext)(b),{getFormData:i}=B();return(0,h.jsx)(pe.Z,{width:800,title:"示例",open:l,onOk:n,onCancel:a,confirmLoading:s,children:(0,h.jsx)(N.Z,{formProps:{form:t},formList:(null==r?void 0:r.state.formList.map((e=>i(e))))||[]})})};var be=l(94805);const Ce=e=>{let{open:t,onOk:l,onCancel:n,confirmLoading:a}=e;const s=(0,o.useContext)(b),{getFormData:r}=B();return(0,h.jsx)(pe.Z,{width:1e3,title:"导入dnd-json",open:t,onOk:l,onCancel:n,confirmLoading:a,children:(0,h.jsxs)(be.Z,{bordered:!0,children:[(0,h.jsx)("div",{children:"import React, {FC} from 'react';"}),(0,h.jsx)("div",{className:"mb-2",children:"import Iform from '@/antdComponents/iForm';"}),(0,h.jsx)("div",{className:"mb-1 whitespace-pre",children:"const SeachForm: FC<Iprops> = ({ form, onFinish }) => {"}),(0,h.jsx)("div",{style:{whiteSpace:"pre-line"},className:"mb-1 whitespace-pre",children:"  const formList = "+JSON.stringify((null==s?void 0:s.state.formList.map((e=>r(e))))||[],null,2)}),(0,h.jsx)("div",{className:"mb-1 whitespace-pre",children:"  return <Iform form={form} formList={formList}></Iform>;"}),(0,h.jsx)("div",{className:"mb-1 whitespace-pre",children:"};"})]})})},ve=()=>{const e=(0,o.useContext)(b),[t,l]=(0,o.useState)(!1),[n,a]=(0,o.useState)(!1),[s,r]=(0,o.useState)(!1),[i,p]=(0,o.useState)(!1),[m]=F.Z.useForm(),[c,d]=(0,o.useState)(!1),[u,y]=(0,o.useState)(!1),[f]=F.Z.useForm(),[g,C]=(0,o.useState)(!1),[v,x]=(0,o.useState)(!1);return(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsx)(ie.Z,{options:[{comConfig:{name:"生成示例",type:"primary"},tag:"template"},{comConfig:{name:"生成JSON",type:"primary",className:"ml-1"},tag:"JSON"},{comConfig:{name:"导入JSON",type:"primary",className:"ml-1"},tag:"import"},{comConfig:{name:"生成代码",type:"primary",className:"ml-1"},tag:"generatCode"}],onClick:e=>{"JSON"===e?l(!0):"import"===e?r(!0):"template"===e?d(!0):"generatCode"===e&&C(!0)}}),(0,h.jsx)(ye,{open:t,onOk:()=>{l(!1)},onCancel:()=>{l(!1)},confirmLoading:n}),(0,h.jsx)(ge,{open:s,onOk:async()=>{const t=m.getFieldValue("json");if(!t)return r(!1);try{await m.validateFields();null==e||e.dispatch({type:"formList",value:JSON.parse(t)}),m.resetFields(),r(!1)}catch(e){}},onCancel:async()=>{m.resetFields(),r(!1)},confirmLoading:i,form:m}),(0,h.jsx)(he,{open:c,onOk:()=>{d(!1)},onCancel:()=>{d(!1)},confirmLoading:u,form:f}),(0,h.jsx)(Ce,{open:g,onOk:()=>{C(!1)},onCancel:()=>{C(!1)},confirmLoading:v})]})},xe=()=>(0,h.jsx)(be.Z,{children:(0,h.jsxs)(v,{children:[(0,h.jsx)(ve,{}),(0,h.jsxs)(n.Z,{gutter:8,children:[(0,h.jsxs)(s.W,{backend:r.PD,children:[(0,h.jsx)(a.Z,{span:6,children:(0,h.jsx)(L,{})}),(0,h.jsx)(a.Z,{span:12,children:(0,h.jsx)(J,{})})]}),(0,h.jsx)(a.Z,{span:6,children:(0,h.jsx)(re,{})})]})]})})}}]);