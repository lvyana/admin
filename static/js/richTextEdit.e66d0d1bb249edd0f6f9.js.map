{"version":3,"file":"static/js/richTextEdit.e66d0d1bb249edd0f6f9.js","mappings":"qPAmBA,EAb4B,SAAHA,GAAqB,IAAfC,EAAOD,EAAPC,QAC9B,OACCC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAC,SAAA,EACHC,EAAAA,EAAAA,KAACC,EAAAA,EAAG,CAACC,KAAM,GAAGH,UACbC,EAAAA,EAAAA,KAAA,OAAKG,wBAAyB,CAAEC,OAAQR,QAEzCI,EAAAA,EAAAA,KAACC,EAAAA,EAAG,CAACC,KAAM,GAAGH,UACbC,EAAAA,EAAAA,KAAA,OAAAD,SAAMH,QAIV,E,gECIQS,EAAYC,EAAAA,EAAZD,QAyFR,EA9EqB,WACpB,IAAAE,GAA4BC,EAAAA,EAAAA,UAA4B,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAtDI,EAAMF,EAAA,GAAEG,EAASH,EAAA,GAGlBI,EAAuC,CAC5CC,YAAa,WACbC,UAAS,SAACJ,GACTC,EAAUD,EACX,EACAK,UAAW,CAAC,GAIZH,EAAaG,UAAuC,YAAI,CACxDC,OAAQ,gBAITC,EAAAA,EAAAA,YAAU,WACT,OAAO,WACS,OAAXP,IACJA,EAAOQ,UACPP,EAAU,MACX,CACD,GAAG,CAACD,IAEJ,IAAAS,GAA8BZ,EAAAA,EAAAA,UAAS,IAAGa,GAAAX,EAAAA,EAAAA,GAAAU,EAAA,GAAnCxB,EAAOyB,EAAA,GAAEC,EAAUD,EAAA,GAG1BE,GAAwBf,EAAAA,EAAAA,WAAS,GAAMgB,GAAAd,EAAAA,EAAAA,GAAAa,EAAA,GAAhCE,EAAID,EAAA,GAAEE,EAAOF,EAAA,GACpBG,GAA4CnB,EAAAA,EAAAA,WAAS,GAAMoB,GAAAlB,EAAAA,EAAAA,GAAAiB,EAAA,GAApDE,EAAcD,EAAA,GA2BrB,OA3BwCA,EAAA,IA4BvC5B,EAAAA,EAAAA,KAAA,OAAAD,UACCF,EAAAA,EAAAA,MAACiC,EAAAA,EAAK,CAAA/B,SAAA,EACLC,EAAAA,EAAAA,KAAC+B,EAAAA,EAAO,CAACpB,OAAQA,EAAQqB,cAzDN,CAAC,EAyDmCC,KAAK,UAAUC,MAAO,CAAEC,aAAc,qBAC7FnC,EAAAA,EAAAA,KAACoC,EAAAA,EAAM,CAACJ,cAAenB,EAAcwB,YA3DvB,4gBA2DiDJ,KAAK,UAAUC,MAAO,CAAEI,OAAQ,YAC/FzC,EAAAA,EAAAA,MAAA,OAAK0C,UAAU,OAAMxC,SAAA,EACpBC,EAAAA,EAAAA,KAACwC,EAAAA,GAAM,CAACC,KAAK,UAAUC,QA3BV,WAGLC,MAAQC,OAAO,cAG1BvC,EAAQ,CACPwC,MAAO,qCACPC,MAAM9C,EAAAA,EAAAA,KAAC+C,EAAAA,EAAyB,IAChCnD,QAAS,oBACToD,KAAI,WAAI,EACRC,SAAQ,WAAI,GAEd,EAc8Cf,MAAO,CAAEgB,YAAa,OAAQnD,SAAC,QAGzEC,EAAAA,EAAAA,KAACwC,EAAAA,GAAM,CAACC,KAAK,UAAUC,QAdT,WACjBpB,EAAWX,aAAM,EAANA,EAAQwC,WACnBzB,GAAQ,EACT,EAW8C3B,SAAC,WAK5CC,EAAAA,EAAAA,KAACoD,EAAAA,EAAM,CAACP,MAAM,OAAOQ,MAAM,SAAS5B,KAAMA,EAAMI,eAAgBA,EAAgByB,aAvC5C,SAACb,GACvCf,GAAQ,EACT,EAqC8G3B,UAC1GC,EAAAA,EAAAA,KAACuD,EAAO,CAAC3D,QAASA,UAKvB,C","sources":["views/plugin/richTextEdit/components/Preview.tsx","views/plugin/richTextEdit/index.tsx"],"sourcesContent":["import React, { DetailedHTMLProps, FC, HTMLAttributes, ReactNode } from 'react';\r\nimport { Row, Col } from 'antd';\r\n\r\ninterface Iprops {\r\n\tcontent: string;\r\n}\r\nconst Preview: FC<Iprops> = ({ content }) => {\r\n\treturn (\r\n\t\t<Row>\r\n\t\t\t<Col span={12}>\r\n\t\t\t\t<div dangerouslySetInnerHTML={{ __html: content }}></div>\r\n\t\t\t</Col>\r\n\t\t\t<Col span={12}>\r\n\t\t\t\t<div>{content}</div>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t);\r\n};\r\n\r\nexport default Preview;\r\n","/**\r\n * @file 富文本编辑器 https://www.wangeditor.com/v5/guide/API.html#%E5%86%85%E5%AE%B9%E5%A4%84%E7%90%86\r\n * @author ly\r\n * @createDate 2022年4月3日\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport '@wangeditor/editor/dist/css/style.css';\r\nimport { Editor, Toolbar } from '@wangeditor/editor-for-react';\r\nimport {\r\n\tIDomEditor, // 编辑器实例接口\r\n\tIEditorConfig, // 编辑器配置\r\n\tIToolbarConfig // 工具栏配置\r\n} from '@wangeditor/editor';\r\nimport Imodal, { OnOkOrCancelType } from '@/antdComponents/iModal';\r\nimport Preview from './components/Preview';\r\nimport { Modal, Button, Space } from 'antd';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport dayjs from 'dayjs';\r\nimport Icard from '@/antdComponents/iCard';\r\n\r\nconst { confirm } = Modal;\r\n\r\nexport interface ISingleMenuConfig {\r\n\tserver: string;\r\n}\r\nexport interface IMenuConfig {\r\n\tuploadImage?: ISingleMenuConfig;\r\n}\r\n\r\n// #----------- 上: ts类型定义 ----------- 分割线 ----------- 下: JS代码 -----------\r\n\r\nconst RichTextEdit = () => {\r\n\tconst [editor, setEditor] = useState<IDomEditor | null>(null); // 存储 editor 实例\r\n\tconst defaultHtml = `<h2>针对目前前端中台项目优化方案</h2><h3>1、代码管理&nbsp;git&nbsp;分支管理&nbsp;版本分支&nbsp;&nbsp;上线流程</h3><p><img src=\"http://114.132.242.253:81/git.png\" style=\"width: 785.00px;height: 622.20px;\"/></p><h3>2、项目优化&nbsp;页面加载慢&nbsp;组件体验不好&nbsp;文件管理&nbsp;数据管理&nbsp;</h3><p>2.1、页面加载&nbsp;webpack打包优化，减少代码体积、静态文件放到cdn、路由懒加载、预加载</p><p>2.2、组件体验&nbsp;交互效果、组件性能调整</p><p>2.3、文件管理&nbsp;约定好文件名字、文件目录结构</p><p>2.4、针对项目使用较多的幂等数据存放vuex状态管理、较多的接口用mixin进行封装</p><h3>3、组件优化&nbsp;公共组件&nbsp;</h3><p>3.1、公共组件封装要减少使用负担</p><p>3.2、考虑公共组件封装使用场景，不必追求封装而封装</p><h3>4、代码优化</h3>`;\r\n\tconst toolbarConfig = {};\r\n\tconst editorConfig: Partial<IEditorConfig> = {\r\n\t\tplaceholder: '请输入内容...',\r\n\t\tonCreated(editor: IDomEditor) {\r\n\t\t\tsetEditor(editor);\r\n\t\t}, // 记录下 editor 实例，重要！\r\n\t\tMENU_CONF: {}\r\n\t};\r\n\r\n\t// 上传图片\r\n\t(editorConfig.MENU_CONF as IMenuConfig)['uploadImage'] = {\r\n\t\tserver: '/api/upload'\r\n\t};\r\n\r\n\t// 及时销毁 editor ，重要！\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tif (editor === null) return;\r\n\t\t\teditor.destroy();\r\n\t\t\tsetEditor(null);\r\n\t\t};\r\n\t}, [editor]);\r\n\r\n\tconst [content, setContent] = useState('');\r\n\r\n\t// 弹窗\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst [confirmLoading, setConfirmLoading] = useState(false);\r\n\r\n\tconst onOkOrCancel: OnOkOrCancelType = (type) => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\tconst onSubmit = () => {\r\n\t\t// console.log(editor?.children); // 节点对象\r\n\t\t// console.log(editor?.getHtml()); //获取非格式化的 html\r\n\t\tlet time = dayjs().format('YYYY-MM-DD');\r\n\t\t// console.log(time);\r\n\r\n\t\tconfirm({\r\n\t\t\ttitle: 'Do you Want to delete these items?',\r\n\t\t\ticon: <ExclamationCircleOutlined />,\r\n\t\t\tcontent: 'Some descriptions',\r\n\t\t\tonOk() {},\r\n\t\t\tonCancel() {}\r\n\t\t});\r\n\t};\r\n\r\n\t// 预览\r\n\tconst onPreview = () => {\r\n\t\tsetContent(editor?.getHtml() as string);\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Icard>\r\n\t\t\t\t<Toolbar editor={editor} defaultConfig={toolbarConfig} mode=\"default\" style={{ borderBottom: '1px solid #ccc' }} />\r\n\t\t\t\t<Editor defaultConfig={editorConfig} defaultHtml={defaultHtml} mode=\"default\" style={{ height: '500px' }} />\r\n\t\t\t\t<div className=\"mt-2\">\r\n\t\t\t\t\t<Button type=\"primary\" onClick={onSubmit} style={{ marginRight: '5px' }}>\r\n\t\t\t\t\t\t提交\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button type=\"primary\" onClick={onPreview}>\r\n\t\t\t\t\t\t预览\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Imodal title=\"预览模板\" width=\"1000px\" open={open} confirmLoading={confirmLoading} onOkOrCancel={onOkOrCancel}>\r\n\t\t\t\t\t<Preview content={content}></Preview>\r\n\t\t\t\t</Imodal>\r\n\t\t\t</Icard>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default RichTextEdit;\r\n"],"names":["_ref","content","_jsxs","Row","children","_jsx","Col","span","dangerouslySetInnerHTML","__html","confirm","Modal","_useState","useState","_useState2","_slicedToArray","editor","setEditor","editorConfig","placeholder","onCreated","MENU_CONF","server","useEffect","destroy","_useState3","_useState4","setContent","_useState5","_useState6","open","setOpen","_useState7","_useState8","confirmLoading","Icard","Toolbar","defaultConfig","mode","style","borderBottom","Editor","defaultHtml","height","className","Button","type","onClick","dayjs","format","title","icon","ExclamationCircleOutlined","onOk","onCancel","marginRight","getHtml","Imodal","width","onOkOrCancel","Preview"],"sourceRoot":""}