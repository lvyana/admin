{"version":3,"file":"static/js/pdf.5d835607914cf81b3ea8.js","mappings":"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","sources":["antdComponents/iPagination/index.tsx","useHooks/useResize.tsx","views/plugin/pdf/index.tsx","webpack://react-app/./src/views/plugin/pdf/index.module.scss?a43d"],"sourcesContent":["/**\r\n * @file Paginations分页\r\n * @author ly\r\n * @createDate 2020年4月27日\r\n */\r\nimport React, { FC } from 'react';\r\nimport { Pagination } from 'antd';\r\n\r\n/**\r\n * @param pageSize 每页条数\r\n * @param pageNum 当前页数\r\n */\r\ntype Page = {\r\n\tpageSize: number;\r\n\tpageNum: number;\r\n};\r\n\r\n/**\r\n * @param total 总条数\r\n * @param page 页码\r\n * @param onPaginationChange 页码或 pageSize 改变的回调，参数是改变后的页码及每页条数\r\n * @param showTotal 用于显示数据总量和当前数据顺序\r\n * @param showSizeChanger 是否展示 pageSize 切换器，当 total 大于 50 时默认为 true\r\n * @param showQuickJumper 是否可以快速跳转至某页\r\n */\r\ninterface IpaginationsProps {\r\n\ttotal?: number; // 条数\r\n\tpage: React.MutableRefObject<Page>;\r\n\tonPaginationChange: (type: 'subimt') => void;\r\n\tshowTotal?: boolean;\r\n\tshowSizeChanger?: boolean;\r\n\tshowQuickJumper?: boolean;\r\n\tstyle?: React.CSSProperties;\r\n\tclassName?: string;\r\n}\r\n\r\n// #----------- 上: ts类型定义 ----------- 分割线 ----------- 下: JS代码 -----------\r\n\r\nconst Ipaginations: FC<IpaginationsProps> = ({\r\n\ttotal,\r\n\tpage,\r\n\tonPaginationChange,\r\n\tshowTotal = true,\r\n\tshowSizeChanger = true,\r\n\tshowQuickJumper = true,\r\n\tstyle,\r\n\tclassName\r\n}) => {\r\n\tconst onChange = (pageNum: number, pageSize: number) => {\r\n\t\tpage.current = { pageSize, pageNum };\r\n\t\tonPaginationChange('subimt');\r\n\t};\r\n\r\n\tconst { pageNum, pageSize } = page.current;\r\n\r\n\treturn (\r\n\t\t<Pagination\r\n\t\t\tstyle={{ marginTop: '30px', float: 'right', ...style }}\r\n\t\t\tclassName={className}\r\n\t\t\ttotal={total}\r\n\t\t\tshowSizeChanger={showSizeChanger}\r\n\t\t\tshowQuickJumper={showQuickJumper}\r\n\t\t\tdefaultCurrent={pageNum}\r\n\t\t\tdefaultPageSize={pageSize}\r\n\t\t\tcurrent={pageNum}\r\n\t\t\tpageSize={pageSize}\r\n\t\t\t// pageSizeOptions=[10, 20, 50, 100]\r\n\t\t\tonChange={onChange}\r\n\t\t\tshowTotal={(total) => {\r\n\t\t\t\tif (showTotal) {\r\n\t\t\t\t\treturn `总 ${total} 条`;\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n};\r\nexport default Ipaginations;\r\n","/**\r\n * @file 监听DOM变化\r\n * @author ly\r\n * @createDate 2022年12月13日\r\n */\r\nimport React, { useEffect, useState } from 'react';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport debounce from 'lodash/debounce';\r\n\r\ntype ResizeParams = {\r\n\tleft: number;\r\n\ttop: number;\r\n\twidth: number;\r\n\theight: number;\r\n};\r\n\r\n// #----------- 上: ts类型定义 ----------- 分割线 ----------- 下: JS代码 -----------\r\n\r\nconst useResize = (Dom?: HTMLElement | null) => {\r\n\tconst [resize, setResize] = useState<ResizeParams>();\r\n\r\n\tconst ro = new ResizeObserver(\r\n\t\tdebounce((entries, observer) => {\r\n\t\t\t// console.log(entries, observer);\r\n\r\n\t\t\tfor (const entry of entries) {\r\n\t\t\t\tconst { left, top, width, height } = entry.contentRect;\r\n\t\t\t\tsetResize({ left, top, width, height });\r\n\r\n\t\t\t\t// console.log('Element:', entry.target);\r\n\t\t\t\t// console.log(`Element's size: ${width}px x ${height}px`);\r\n\t\t\t\t// console.log(`Element's paddings: ${top}px ; ${left}px`);\r\n\t\t\t}\r\n\t\t}, 500)\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (Dom) {\r\n\t\t\tro.observe(Dom);\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tif (Dom) {\r\n\t\t\t\tro.unobserve(Dom);\r\n\t\t\t}\r\n\t\t};\r\n\t}, [Dom]);\r\n\r\n\treturn { resize };\r\n};\r\n\r\nexport default useResize;\r\n","/**\r\n * @file pdf\r\n * @author ly\r\n * @createDate 2022年6月3日\r\n * https://www.5axxw.com/wiki/content/n0gokf 文档说明\r\n */\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { pdfjs, Document, Page } from 'react-pdf';\r\nimport Icard from '@/antdComponents/iCard';\r\nimport styles from './index.module.scss';\r\nimport 'react-pdf/dist/esm/Page/AnnotationLayer.css';\r\nimport 'react-pdf/dist/esm/Page/TextLayer.css';\r\nimport Iloading from '@/antdComponents/iLoading';\r\nimport useResize from '@/useHooks/useResize';\r\nimport pdffile from './title.pdf';\r\nimport Ipaginations from '@/antdComponents/iPagination';\r\nimport { useDebounce } from 'ahooks';\r\n\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\r\n\r\nconst Pdf = () => {\r\n\tconst page = useRef({ pageNum: 1, pageSize: 1 });\r\n\tconst [total, setTotal] = useState(1);\r\n\tconst [update, setUpdate] = useState(0);\r\n\r\n\tconst onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\r\n\t\tsetTotal(numPages);\r\n\t};\r\n\r\n\tconst onPaginationChange = () => {\r\n\t\tsetUpdate(update + 1);\r\n\t};\r\n\r\n\t//阻止右键默认事件(禁止下载)\r\n\tconst onPreventDefault = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n\t\te.preventDefault();\r\n\t};\r\n\r\n\t// 动态获取width\r\n\tconst { resize } = useResize(document.getElementById('pdfCard'));\r\n\tconst resizeDebounce = useDebounce(resize, { wait: 500 });\r\n\r\n\treturn (\r\n\t\t<Icard>\r\n\t\t\t<div id=\"pdfCard\" className={styles.pdf} onContextMenu={(e) => onPreventDefault(e)}>\r\n\t\t\t\t<Document className={'w-full'} file={pdffile} onLoadSuccess={onDocumentLoadSuccess} loading={<Iloading></Iloading>}>\r\n\t\t\t\t\t<Page pageNumber={page.current.pageNum} width={resizeDebounce?.width} />\r\n\t\t\t\t</Document>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<Ipaginations\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonPaginationChange={onPaginationChange}\r\n\t\t\t\t\ttotal={total}\r\n\t\t\t\t\tshowTotal={false}\r\n\t\t\t\t\tshowSizeChanger={false}\r\n\t\t\t\t\tshowQuickJumper={false}\r\n\t\t\t\t\tclassName=\"mt-4\"></Ipaginations>\r\n\t\t\t</div>\r\n\t\t</Icard>\r\n\t);\r\n};\r\n\r\nexport default Pdf;\r\n\r\n// http://172.16.81.22:8018/sit-api/file/statics/2022/04/19/f1ca4003606244a0bf16a29dcf1e1a5a.pdf\r\n","// extracted by mini-css-extract-plugin\nexport default {\"pdf\":\"pdf_pdf__i2Jue\",\"pdfBtn\":\"pdf_pdfBtn__FINxd\"};"],"names":["_ref","total","page","onPaginationChange","_ref$showTotal","showTotal","_ref$showSizeChanger","showSizeChanger","_ref$showQuickJumper","showQuickJumper","style","className","_page$current","current","pageNum","pageSize","_jsx","Pagination","_objectSpread","marginTop","float","defaultCurrent","defaultPageSize","onChange","concat","Dom","_useState","useState","_useState2","_slicedToArray","resize","setResize","ro","ResizeObserver","debounce","entries","observer","_step","_iterator","_createForOfIteratorHelper","s","n","done","_entry$contentRect","value","contentRect","left","top","width","height","err","e","f","useEffect","observe","unobserve","pdfjs","workerSrc","useRef","setTotal","_useState3","_useState4","update","setUpdate","useResize","document","getElementById","resizeDebounce","useDebounce","wait","_jsxs","Icard","children","id","onContextMenu","preventDefault","onPreventDefault","Document","file","pdffile","onLoadSuccess","numPages","loading","Iloading","Page","pageNumber","Ipaginations"],"sourceRoot":""}