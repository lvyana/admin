"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[3032],{14532:(e,n,t)=>{t.d(n,{A:()=>c});t(65043);var r=t(27371),o=t(96029);const a=e=>{let{items:n,styleConfig:t,style:r,bordered:a}=e;const{token:l}=(0,o.A)(),c={marginBottom:24,background:l.colorFillAlter,borderRadius:l.borderRadiusLG,border:"none"};if("1"===t){return{list:null==n?void 0:n.map((e=>({...e,style:c}))),style:{background:l.colorBgContainer},bordered:!1}}return{items:n,styleConfig:t,style:r,bordered:a}};var l=t(70579);const c=e=>{let{...n}=e;const{items:t,styleConfig:o,style:c,bordered:i,...s}=n,d=a({items:t,styleConfig:o,style:c,bordered:i});return(0,l.jsx)(r.A,{...s,bordered:d.bordered,style:d.style,items:d.list})}},60198:(e,n,t)=>{t.r(n),t.d(n,{IuseSyncExternalStore:()=>v,IuseSyncExternalStoreItem:()=>f,default:()=>x});var r=t(65043);let o=0,a=[{id:o++,text:"Todo #1"}],l=[];function c(){for(let e of l)e()}const i={addTodo(){a=[...a,{id:o++,text:"Todo #"+o}],c()},deleteTodo(){a=a.filter(((e,n)=>0!==n)),c()},subscribe:e=>(l=[...l,e],()=>{l=l.filter((n=>n!==e))}),getSnapshot:()=>a};var s=t(76566),d=t(90638),u=t(14532),p=t(70579);const v=()=>{const e=(0,r.useSyncExternalStore)(i.subscribe,i.getSnapshot),n={name:"Add todo",type:"primary",onClick:()=>i.addTodo()};return(0,p.jsxs)(s.A,{children:[(0,p.jsx)(d.A,{...n}),(0,p.jsx)("hr",{}),(0,p.jsx)("ul",{children:e.map((e=>(0,p.jsx)("li",{children:e.text},e.id)))}),(0,p.jsx)(f,{}),(0,p.jsx)(m,{})]})},f=()=>{const e=(0,r.useSyncExternalStore)(i.subscribe,i.getSnapshot),n={name:"Add todo",type:"primary",onClick:()=>i.addTodo()},t={name:"delete todo",type:"primary",onClick:()=>i.deleteTodo()};return(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{children:"测试: useSyncExternalStore数据可以共享"}),(0,p.jsx)(d.A,{...n}),(0,p.jsx)(d.A,{...t}),(0,p.jsx)("hr",{}),(0,p.jsx)("ul",{children:e.map((e=>(0,p.jsx)("li",{children:e.text},e.id)))})]})},y=[{header:"useSyncExternalStore 参数说明",content:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{children:"useSyncExternalStore(todosStore.subscribe, todosStore.getSnapshot)"}),(0,p.jsx)("div",{children:"subscribe函数得订阅这个store, 并且返回一个可以取消订阅的函数。"}),(0,p.jsx)("div",{children:"getSnapshot函数得可以从store里读取数据快照。"}),(0,p.jsx)("div",{children:"subscribe: 是一个函数，只有一个回调函数作为入参，并且使其订阅这个store. 当store发生改变的时候，这个回调函数应该得到执行，而且这会触发组件的重新渲染。subscribe函数应该返回一个可以取消订阅的方法。"}),(0,p.jsx)("div",{children:"getSnapshot: 是一个函数，返回一个组件中需要用到的store里的一个数据值的快照。当这个store没有改变的时候，重复调用getSnapshot必须返回同样的值。如果store发生改变并且返回的数据值不一样了（用Object.js做比较），那么Reacr重新渲染这个组件。"}),(0,p.jsx)("div",{children:"getServerSnapshot（可选参数）: 是一个函数，返回store数据的初始快照。只会在服务端渲染的时候使用，并且是在服务端渲染好的内容往客户端灌水的时候。服务端的快照必须和客户端的一致。并且通常是序列化后被发送到客户端的，如果你不传这个参数，在服务端渲染的时候会报错"}),(0,p.jsx)("div",{children:"当前你在组件渲染中使用到的store数据的快照"}),(0,p.jsx)("div",{children:"警告"}),(0,p.jsx)("div",{children:"调用getSnapshot返回的这个store数据快照不能修改，如果所依赖的store有可以更改的数据，当数据发生改变返回新的不可修改的数据，否则返回上一次缓存的数据快照。"}),(0,p.jsx)("div",{children:"如果在重新渲染的时候传来一个不同的subscribe函数，React会用新的subscribe重新订阅这个store。你可以通过在组件外面声明subscribe的方式来避免"})]}),key:"1"}],m=()=>(0,p.jsx)(u.A,{items:y}),x=v},61444:(e,n,t)=>{t.d(n,{A:()=>g});var r=t(58168),o=t(60436),a=t(5544),l=t(82284),c=t(98139),i=t.n(c),s=t(28678),d=t(97907),u=t(65043),p=t(53986),v=t(62149),f=t(64467),y=t(50541),m=t(25001),x=u.forwardRef((function(e,n){var t=e.prefixCls,r=e.forceRender,o=e.className,l=e.style,c=e.children,s=e.isActive,d=e.role,p=u.useState(s||r),v=(0,a.A)(p,2),y=v[0],m=v[1];return u.useEffect((function(){(r||s)&&m(!0)}),[r,s]),y?u.createElement("div",{ref:n,className:i()("".concat(t,"-content"),(0,f.A)((0,f.A)({},"".concat(t,"-content-active"),s),"".concat(t,"-content-inactive"),!s),o),style:l,role:d},u.createElement("div",{className:"".concat(t,"-content-box")},c)):null}));x.displayName="PanelContent";const b=x;var h=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"];const A=u.forwardRef((function(e,n){var t=e.showArrow,o=void 0===t||t,a=e.headerClass,l=e.isActive,c=e.onItemClick,s=e.forceRender,d=e.className,v=e.prefixCls,x=e.collapsible,A=e.accordion,C=e.panelKey,I=e.extra,j=e.header,k=e.expandIcon,S=e.openMotion,E=e.destroyInactivePanel,g=e.children,N=(0,p.A)(e,h),P="disabled"===x,R="header"===x,w="icon"===x,K=null!=I&&"boolean"!=typeof I,T=function(){null==c||c(C)},M="function"==typeof k?k(e):u.createElement("i",{className:"arrow"});M&&(M=u.createElement("div",{className:"".concat(v,"-expand-icon"),onClick:["header","icon"].includes(x)?T:void 0},M));var O=i()((0,f.A)((0,f.A)((0,f.A)({},"".concat(v,"-item"),!0),"".concat(v,"-item-active"),l),"".concat(v,"-item-disabled"),P),d),B={className:i()(a,(0,f.A)((0,f.A)((0,f.A)({},"".concat(v,"-header"),!0),"".concat(v,"-header-collapsible-only"),R),"".concat(v,"-icon-collapsible-only"),w)),"aria-expanded":l,"aria-disabled":P,onKeyDown:function(e){"Enter"!==e.key&&e.keyCode!==m.A.ENTER&&e.which!==m.A.ENTER||T()}};return R||w||(B.onClick=T,B.role=A?"tab":"button",B.tabIndex=P?-1:0),u.createElement("div",(0,r.A)({},N,{ref:n,className:O}),u.createElement("div",B,o&&M,u.createElement("span",{className:"".concat(v,"-header-text"),onClick:"header"===x?T:void 0},j),K&&u.createElement("div",{className:"".concat(v,"-extra")},I)),u.createElement(y.Ay,(0,r.A)({visible:l,leavedClassName:"".concat(v,"-content-hidden")},S,{forceRender:s,removeOnLeave:E}),(function(e,n){var t=e.className,r=e.style;return u.createElement(b,{ref:n,prefixCls:v,className:t,style:r,isActive:l,forceRender:s,role:A?"tabpanel":void 0},g)})))}));var C=["children","label","key","collapsible","onItemClick","destroyInactivePanel"];const I=function(e,n,t){return Array.isArray(e)?function(e,n){var t=n.prefixCls,o=n.accordion,a=n.collapsible,l=n.destroyInactivePanel,c=n.onItemClick,i=n.activeKey,s=n.openMotion,d=n.expandIcon;return e.map((function(e,n){var v=e.children,f=e.label,y=e.key,m=e.collapsible,x=e.onItemClick,b=e.destroyInactivePanel,h=(0,p.A)(e,C),I=String(null!=y?y:n),j=null!=m?m:a,k=null!=b?b:l,S=!1;return S=o?i[0]===I:i.indexOf(I)>-1,u.createElement(A,(0,r.A)({},h,{prefixCls:t,key:I,panelKey:I,isActive:S,accordion:o,openMotion:s,expandIcon:d,header:f,collapsible:j,onItemClick:function(e){"disabled"!==j&&(c(e),null==x||x(e))},destroyInactivePanel:k}),v)}))}(e,t):(0,v.A)(n).map((function(e,n){return function(e,n,t){if(!e)return null;var r=t.prefixCls,o=t.accordion,a=t.collapsible,l=t.destroyInactivePanel,c=t.onItemClick,i=t.activeKey,s=t.openMotion,d=t.expandIcon,p=e.key||String(n),v=e.props,f=v.header,y=v.headerClass,m=v.destroyInactivePanel,x=v.collapsible,b=v.onItemClick,h=!1;h=o?i[0]===p:i.indexOf(p)>-1;var A=null!=x?x:a,C={key:p,panelKey:p,header:f,headerClass:y,isActive:h,prefixCls:r,destroyInactivePanel:null!=m?m:l,openMotion:s,accordion:o,children:e.props.children,onItemClick:function(e){"disabled"!==A&&(c(e),null==b||b(e))},expandIcon:d,collapsible:A};return"string"==typeof e.type?e:(Object.keys(C).forEach((function(e){void 0===C[e]&&delete C[e]})),u.cloneElement(e,C))}(e,n,t)}))};var j=t(48060);function k(e){var n=e;if(!Array.isArray(n)){var t=(0,l.A)(n);n="number"===t||"string"===t?[n]:[]}return n.map((function(e){return String(e)}))}var S=u.forwardRef((function(e,n){var t=e.prefixCls,l=void 0===t?"rc-collapse":t,c=e.destroyInactivePanel,p=void 0!==c&&c,v=e.style,f=e.accordion,y=e.className,m=e.children,x=e.collapsible,b=e.openMotion,h=e.expandIcon,A=e.activeKey,C=e.defaultActiveKey,S=e.onChange,E=e.items,g=i()(l,y),N=(0,s.A)([],{value:A,onChange:function(e){return null==S?void 0:S(e)},defaultValue:C,postState:k}),P=(0,a.A)(N,2),R=P[0],w=P[1];(0,d.Ay)(!m,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var K=I(E,m,{prefixCls:l,accordion:f,openMotion:b,expandIcon:h,collapsible:x,destroyInactivePanel:p,onItemClick:function(e){return w((function(){return f?R[0]===e?[]:[e]:R.indexOf(e)>-1?R.filter((function(n){return n!==e})):[].concat((0,o.A)(R),[e])}))},activeKey:R});return u.createElement("div",(0,r.A)({ref:n,className:g,style:v,role:f?"tablist":void 0},(0,j.A)(e,{aria:!0,data:!0})),K)}));const E=Object.assign(S,{Panel:A}),g=E;E.Panel}}]);