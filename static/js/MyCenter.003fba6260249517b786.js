"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[439],{34095:function(e,s,n){n.r(s),n.d(s,{default:function(){return b}});var t=n(29439),i=n(72791),r=n(15255),o=n(21940),a=n(22266),l=n(11142),u=n(64957),c=(n(15580),n(19689)),d=n(80184),p=function(e){var s=e.updatepPhoto,n=e.setPhotoFinish,r=(0,i.useRef)(null),o=(0,i.useState)(!0),a=(0,t.Z)(o,2),l=a[0],p=a[1];return(0,d.jsx)(c.Z,{loading:l,children:(0,d.jsx)(u.Z,{src:s,style:{height:400,width:"100%"},initialAspectRatio:16/9,guides:!1,crop:function(){var e=null==r?void 0:r.current,s=null==e?void 0:e.cropper;n(s.getCroppedCanvas().toDataURL()),p(!1)},ref:r})})},h=n(66106),f=n(30914),x=n(26259),m=n(87309),j=n(72351),Z=function(e){var s=e.photoFinish,n=e.setPhotoFinish,r=(0,i.useState)(s),o=(0,t.Z)(r,2),u=o[0],c=o[1];return(0,d.jsxs)("div",{children:[(0,d.jsxs)(h.Z,{gutter:20,align:"bottom",children:[(0,d.jsx)(f.Z,{span:16,children:(0,d.jsx)(p,{updatepPhoto:u,setPhotoFinish:n})}),(0,d.jsx)(f.Z,{span:8,children:(0,d.jsx)(a.C,{src:s,size:200,icon:(0,d.jsx)(l.Z,{})})})]}),(0,d.jsx)("div",{style:{marginTop:"10px"},children:(0,d.jsx)(x.Z,{name:"file",showUploadList:!1,beforeUpload:function(e){return v(e,(function(e){c(e)})),!1},children:(0,d.jsx)(m.ZP,{icon:(0,d.jsx)(j.Z,{}),children:"上传头像"})})})]})},v=function(e,s){var n=new FileReader;n.addEventListener("load",(function(){return s(n.result)})),n.readAsDataURL(e)},P=n(57689),g=n(95474),F=n(11201),w=function(){var e=(0,P.TH)(),s=g.Z.useForm(),n=(0,t.Z)(s,1)[0];(0,i.useEffect)((function(){var s;e.state?n.setFieldsValue({userName:null===(s=e.state)||void 0===s?void 0:s.name}):n.setFieldsValue({userName:void 0})}),[n,e]);return(0,d.jsxs)(g.Z,{form:n,labelCol:{span:4,offset:4},wrapperCol:{span:12},onFinish:function(e){},onFinishFailed:function(e){},children:[(0,d.jsx)(g.Z.Item,{label:"用户名",name:"userName",rules:[{required:!0,message:"Please input your username!"}],children:(0,d.jsx)(F.Z,{})}),(0,d.jsx)(g.Z.Item,{label:"密码",name:"passWord",rules:[{required:!0,message:"Please input your password!"}],children:(0,d.jsx)(F.Z.Password,{})}),(0,d.jsx)(g.Z.Item,{label:"确认密码",name:"confirmPassWord",rules:[{required:!0,message:"Please input your confirm password!"},{validator:function(e,s){return s&&s!==n.getFieldValue("passWord")?Promise.reject(new Error("密码不一致")):Promise.resolve()}}],children:(0,d.jsx)(F.Z.Password,{})}),(0,d.jsx)(g.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,d.jsx)(m.ZP,{type:"primary",htmlType:"submit",children:"Submit"})})]})},C=n(51283),b=function(){var e=(0,r.TL)(),s=(0,i.useState)(!1),n=(0,t.Z)(s,2),u=n[0],c=n[1],p=(0,i.useState)(!1),h=(0,t.Z)(p,2),f=h[0],x=h[1],m=(0,r.CG)(o.MM),j=(0,i.useState)(m),v=(0,t.Z)(j,2),P=v[0],g=v[1],F=function(){x(!0),setTimeout((function(){e((0,o._d)(P)),c(!1),x(!1)}),1e3)},b=function(){c(!1)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{marginBottom:"20px",textAlign:"center"},children:(0,d.jsx)("span",{onClick:function(){g(m),c(!0)},children:(0,d.jsx)(a.C,{src:m,size:200,icon:(0,d.jsx)(l.Z,{})})})}),(0,d.jsx)(w,{})]}),(0,d.jsx)(C.Z,{title:"修改头像",open:u,confirmLoading:f,onOkOrCancel:function(e){"ok"===e?F():"cancel"===e&&b()},width:800,children:(0,d.jsx)(Z,{photoFinish:P,setPhotoFinish:g})})]})}}}]);