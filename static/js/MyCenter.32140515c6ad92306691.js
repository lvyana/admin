"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[439],{34095:function(e,s,n){n.r(s),n.d(s,{default:function(){return y}});var t=n(29439),i=n(72791),r=n(94805),o=n(15255),a=n(21940),l=n(22266),u=n(11142),c=n(64957),d=(n(15580),n(19689)),p=n(80184),h=function(e){var s=e.updatepPhoto,n=e.setPhotoFinish,r=(0,i.useRef)(null),o=(0,i.useState)(!0),a=(0,t.Z)(o,2),l=a[0],u=a[1];return(0,p.jsx)(d.Z,{loading:l,children:(0,p.jsx)(c.Z,{src:s,style:{height:400,width:"100%"},initialAspectRatio:16/9,guides:!1,crop:function(){var e=null==r?void 0:r.current,s=null==e?void 0:e.cropper;n(s.getCroppedCanvas().toDataURL()),u(!1)},ref:r})})},f=n(66106),x=n(30914),j=n(26259),m=n(87309),Z=n(72351),v=function(e){var s=e.photoFinish,n=e.setPhotoFinish,r=(0,i.useState)(s),o=(0,t.Z)(r,2),a=o[0],c=o[1];return(0,p.jsxs)("div",{children:[(0,p.jsxs)(f.Z,{gutter:20,align:"bottom",children:[(0,p.jsx)(x.Z,{span:16,children:(0,p.jsx)(h,{updatepPhoto:a,setPhotoFinish:n})}),(0,p.jsx)(x.Z,{span:8,children:(0,p.jsx)(l.C,{src:s,size:200,icon:(0,p.jsx)(u.Z,{})})})]}),(0,p.jsx)("div",{style:{marginTop:"10px"},children:(0,p.jsx)(j.Z,{name:"file",showUploadList:!1,beforeUpload:function(e){return P(e,(function(e){c(e)})),!1},children:(0,p.jsx)(m.ZP,{icon:(0,p.jsx)(Z.Z,{}),children:"上传头像"})})})]})},P=function(e,s){var n=new FileReader;n.addEventListener("load",(function(){return s(n.result)})),n.readAsDataURL(e)},g=n(57689),F=n(95474),w=n(11201),C=function(){var e=(0,g.TH)(),s=F.Z.useForm(),n=(0,t.Z)(s,1)[0];(0,i.useEffect)((function(){var s;e.state?n.setFieldsValue({userName:null===(s=e.state)||void 0===s?void 0:s.name}):n.setFieldsValue({userName:void 0})}),[n,e]);return(0,p.jsxs)(F.Z,{form:n,labelCol:{span:4,offset:4},wrapperCol:{span:12},onFinish:function(e){},onFinishFailed:function(e){},children:[(0,p.jsx)(F.Z.Item,{label:"用户名",name:"userName",rules:[{required:!0,message:"Please input your username!"}],children:(0,p.jsx)(w.Z,{})}),(0,p.jsx)(F.Z.Item,{label:"密码",name:"passWord",rules:[{required:!0,message:"Please input your password!"}],children:(0,p.jsx)(w.Z.Password,{})}),(0,p.jsx)(F.Z.Item,{label:"确认密码",name:"confirmPassWord",rules:[{required:!0,message:"Please input your confirm password!"},{validator:function(e,s){return s&&s!==n.getFieldValue("passWord")?Promise.reject(new Error("密码不一致")):Promise.resolve()}}],children:(0,p.jsx)(w.Z.Password,{})}),(0,p.jsx)(F.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,p.jsx)(m.ZP,{type:"primary",htmlType:"submit",children:"Submit"})})]})},b=n(51283),y=function(){var e=(0,o.TL)(),s=(0,i.useState)(!1),n=(0,t.Z)(s,2),c=n[0],d=n[1],h=(0,i.useState)(!1),f=(0,t.Z)(h,2),x=f[0],j=f[1],m=(0,o.CG)(a.MM),Z=(0,i.useState)(m),P=(0,t.Z)(Z,2),g=P[0],F=P[1],w=function(){j(!0),setTimeout((function(){e((0,a._d)(g)),d(!1),j(!1)}),1e3)},y=function(){d(!1)};return(0,p.jsxs)(r.Z,{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{style:{marginBottom:"20px",textAlign:"center"},children:(0,p.jsx)("span",{onClick:function(){F(m),d(!0)},children:(0,p.jsx)(l.C,{src:m,size:200,icon:(0,p.jsx)(u.Z,{})})})}),(0,p.jsx)(C,{})]}),(0,p.jsx)(b.Z,{title:"修改头像",open:c,confirmLoading:x,onOkOrCancel:function(e){"ok"===e?w():"cancel"===e&&y()},width:800,children:(0,p.jsx)(v,{photoFinish:g,setPhotoFinish:F})})]})}}}]);