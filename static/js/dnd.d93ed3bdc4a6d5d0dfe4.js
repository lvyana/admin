"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[3459],{90501:function(e,n,t){t.d(n,{n:function(){return a}});var r=t(93433),a=function(e,n,t){var a=JSON.parse(JSON.stringify(e));return a.splice.apply(a,[t,0].concat((0,r.Z)(a.splice(n,1)))),a}},76623:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ce}});var r=t(72791),a=t(66106),l=t(30914),o=t(15287),i=t(46401),s=t(29439),u=t(92810),c=t(1067),p="formItem",d="GenerateFormItem",m=t(1413),f=t(80184),y=(0,r.createContext)(null),v={formList:[],selectFormItemKey:void 0},b=function(e,n){var t=n.type,r=n.value;return"formList"===t?(0,m.Z)((0,m.Z)({},e),{},{formList:r}):"selectFormItemKey"===t?(0,m.Z)((0,m.Z)({},e),{},{selectFormItemKey:r}):e},h=function(e){var n=e.children,t=(0,r.useReducer)(b,v),a=(0,s.Z)(t,2),l=a[0],o=a[1],i=(0,r.useMemo)((function(){return{state:l,dispatch:o}}),[l]);return(0,f.jsx)(y.Provider,{value:i,children:n})},Z=t(83298),x=[{name:"输入框",type:"input"},{name:"文本框",type:"textArea"},{name:"下拉框",type:"select"},{name:"联级框",type:"cascader"},{name:"按钮集合",type:"button"}],g=function(e){var n=e.name,t=e.type,a=(0,Z.Z)().token,o=(0,r.useContext)(y),i=null==o?void 0:o.state.formList,d=(0,c.c)((function(){return{type:p,item:{name:t},end:function(e,n){var t=n.getDropResult();if(e&&t){var r=e.name,a=i||[];"button"===r?a.push({type:r,name:"name"+(null==i?void 0:i.length),key:(0,u.Z)(),span:24,option:[{name:"确认",type:"ok",btnType:"primary",span:12,permission:"",iconFont:"",id:"0"}]}):a.push({type:r,label:"label",name:"name"+(null==i?void 0:i.length),disabled:!1,key:(0,u.Z)(),isRule:1,span:24,labelCol:6,trigger:"1"}),null==o||o.dispatch({type:"formList",value:a})}},collect:function(e){return{isDragging:e.isDragging(),handlerId:e.getHandlerId()}}}}),[i]),v=(0,s.Z)(d,2),b=(v[0].isDragging,v[1]);return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(l.Z,{span:12,children:(0,r.useMemo)((function(){return e=(0,f.jsx)("div",{ref:b,"data-testid":"formItem",className:"rounded-lg p-2 mb-2 border border-solid cursor-pointer",style:{borderColor:a.colorPrimaryBorder},children:n}),t=function(){var n=(0,Z.Z)().token,t=(0,r.useState)(!1),a=(0,s.Z)(t,2),l=a[0],o=a[1],i=function(){o(!1)};return(0,f.jsx)(f.Fragment,{children:r.cloneElement(e,{style:(0,m.Z)((0,m.Z)({},e.props.style),{},{backgroundColor:l?n.colorPrimaryBg:""}),onMouseMove:function(){l||o(!0)},onMouseLeave:i,onDragEnd:i})})},(0,f.jsx)(t,{});var e,t}),[a])})})},C=function(){var e=(0,Z.Z)().token;return(0,f.jsx)("div",{className:"rounded-lg p-2 border-2 border-solid",style:{borderColor:e.colorPrimaryBorder},children:(0,f.jsx)(a.Z,{gutter:16,children:x.map((function(e){return(0,f.jsx)(g,{name:e.name,type:e.type},e.type)}))})})},k=t(93433),j=t(98422),L=t(95474),F=t(87309),O=t(11532),w=t(23414),I=t(75955),S=t(90501),N=t(4942),P=t(29751),T=t(87640),D=function(e){return(0,T.ZP)({url:"/dnd/options",method:"get"})},K=function(e,n){var t=(0,r.useContext)(y),a=L.Z.useWatch([e],n);(0,r.useEffect)((function(){if(null!=t&&t.state.selectFormItemKey){var n=t.state.formList.map((function(n){return(null==t?void 0:t.state.selectFormItemKey)===n.key?(0,m.Z)((0,m.Z)({},n),{},(0,N.Z)({},e,a)):n}));t.dispatch({type:"formList",value:n})}}),[a])},R=function(){return{getFormData:function(e){var n=e.type,t=e.key,r=e.span,a=e.label,l=e.disabled,o=e.option,i=e.isRule,s=e.isRuleTitle,u=e.rule,c=e.ruleTitle,p=e.name,d=e.labelCol,f={type:n,key:t,span:r,label:a,name:p,disabled:l,comConfig:{option:o}};return f=2===i?(0,m.Z)((0,m.Z)({},f),{},{rules:[{required:!0,message:s}]}):(0,m.Z)((0,m.Z)({},f),{},{rules:[{required:!1}]}),u&&(f=(0,m.Z)((0,m.Z)({},f),{},{rules:[].concat((0,k.Z)(f.rules||[]),[{validator:function(e,n){var t=u&&new RegExp(u.substring(1,u.length-1));return""===n||null==n||""===t||null!=t&&t.test(n)||""===n?Promise.resolve():Promise.reject(new Error(c))}}])})),d&&(f=(0,m.Z)((0,m.Z)({},f),{},{layout:{labelCol:{span:d},wrapperCol:{span:24-d}}})),f}}},E=function(e){var n=e.formParams,t=e.index,o=(0,Z.Z)().token,i=(0,r.useContext)(y),p=R().getFormData,v=(0,r.useRef)(null),b=(0,j.L)({accept:d,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,n){var r;if(v.current){var a=e.index,l=t;if(a!==l){var o=null===(r=v.current)||void 0===r?void 0:r.getBoundingClientRect(),s=(o.bottom-o.top)/2,u=n.getClientOffset();if(u){var c=u.y-o.top;if(a<l&&c<s)return;if(a>l&&c>s)return}var p=(0,S.n)((null==i?void 0:i.state.formList)||[],l,a);null==i||i.dispatch({type:"formList",value:p||[]}),e.index=l}}}},[null==i?void 0:i.state.formList]),h=(0,s.Z)(b,2),x=h[0].handlerId,g=h[1],C=(0,c.c)((function(){return{type:d,item:function(){return{id:n.key,index:t}},collect:function(e){return{handlerId:e.getHandlerId(),isDragging:e.isDragging()}}}}),[t]),N=(0,s.Z)(C,3),P=N[0].isDragging,T=N[1],D=(N[2],P?0:1);T(g(v));var K=L.Z.useForm(),E=(0,s.Z)(K,1)[0],V=[(0,m.Z)((0,m.Z)({},p(n)),{},{span:24})];return(0,f.jsxs)(a.Z,{onClick:function(){n.key!==(null==i?void 0:i.state.selectFormItemKey)&&(null==i||i.dispatch({type:"selectFormItemKey",value:n.key}))},className:"rounded-lg p-4 pb-0 mb-2 border border-solid "+"".concat((null==i?void 0:i.state.selectFormItemKey)===n.key?"shadow-lg":""),style:{opacity:D,height:100,backgroundColor:(null==i?void 0:i.state.selectFormItemKey)===n.key?o.colorPrimaryBg:"",borderColor:o.colorPrimaryBorder},"data-handler-id":x,ref:v,children:[(0,f.jsx)(l.Z,{flex:"auto",children:(0,f.jsx)(I.Z,{form:E,formList:V})}),(0,f.jsxs)("div",{className:"absolute right-0 bottom-1 text-center",children:[(0,f.jsx)(F.ZP,{type:"link",icon:(0,f.jsx)(O.Z,{}),onClick:function(e){return function(e){e.stopPropagation();var t=(null==i?void 0:i.state.formList.filter((function(e){return e.key!==n.key})))||[];null==i||i.dispatch({type:"formList",value:t}),n.key===(null==i?void 0:i.state.selectFormItemKey)&&(null==i||i.dispatch({type:"selectFormItemKey",value:void 0}))}(e)}}),(0,f.jsx)(F.ZP,{type:"link",icon:(0,f.jsx)(w.Z,{}),onClick:function(e){return function(e){e.stopPropagation();var t=(null==i?void 0:i.state.formList.reduce((function(e,t){return n.key===t.key?[].concat((0,k.Z)(e),[t,(0,m.Z)((0,m.Z)({},t),{},{name:"name"+(null==V?void 0:V.length),key:(0,u.Z)()})]):[].concat((0,k.Z)(e),[t])}),[]))||[];null==i||i.dispatch({type:"formList",value:t})}(e)}})]})]})},V=function(){var e=(0,Z.Z)().token,n=(0,r.useContext)(y),t=(0,j.L)({accept:p,drop:function(){return{name:"GenerateForm"}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),o=(0,s.Z)(t,2),i=o[0],u=(i.isOver,i.canDrop,o[1]);return(0,f.jsx)("div",{ref:u,"data-testid":"GenerateForm",className:"rounded-lg p-2 border-2 border-solid  ",style:{minHeight:500,borderColor:e.colorPrimaryBorder},children:(0,f.jsx)(a.Z,{children:null==n?void 0:n.state.formList.map((function(e,n){return(0,f.jsx)(l.Z,{span:e.span,children:(0,f.jsx)(E,{formParams:e,index:n})},e.key)}))})})},B=t(74165),J=t(15861),A=t(96230),M=t(79286),q=t(92143),G=t(81324),H=t(49155),_=function(e){var n=e.options,t=e.updateOptions,r=function(e){var n=e.options,t=e.key,r=e.value,a=e.id;return n.map((function(e){return e.id===a?(0,m.Z)((0,m.Z)({},e),{},(0,N.Z)({},t,r)):e}))};return(0,f.jsx)(f.Fragment,{children:n.map((function(e,o){return(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(l.Z,{span:8,children:(0,G.E2)({placeholder:"label",value:e.label,onChange:function(a){return function(e,a){var l=r({options:n,key:"label",value:e.target.value,id:a});t(l)}(a,e.id)}})}),(0,f.jsx)(l.Z,{span:8,children:(0,G.E2)({placeholder:"value",value:e.value,onChange:function(a){return function(e,a){var l=r({options:n,key:"value",value:e.target.value,id:a});t(l)}(a,e.id)}})}),(0,f.jsx)(l.Z,{span:4,children:(0,H.c)({option:[{name:"",type:"add",block:!0,btnType:"dashed",iconFont:(0,f.jsx)(M.Z,{}),span:24}],onClick:function(){var r,a;r=e.id,a=n.find((function(e){return e.id===r})),a&&t([].concat((0,k.Z)(n),[(0,m.Z)((0,m.Z)({},a),{},{id:(0,u.Z)()})]))}})}),(0,f.jsx)(l.Z,{span:4,children:(0,H.c)({option:[{name:"",type:"subtract",block:!0,btnType:"dashed",iconFont:(0,f.jsx)(q.Z,{}),span:24}],onClick:function(){!function(e){if(1!==n.length){var r=n.filter((function(n){return n.id!==e}));t(r)}}(e.id)}})})]},e.id)}))})},W=t(61883),z=[{type:"primary",value:"primary"},{type:"ghost",value:"ghost"},{type:"dashed",value:"dashed"},{type:"link",value:"link"},{type:"text",value:"text"},{type:"default",value:"default"}],$=function(e){var n=e.options,t=e.updateOptions,r=function(e,r,a){var l=o({options:n,key:r,value:e.target.value,id:a});t(l)},o=function(e){var n=e.options,t=e.key,r=e.value,a=e.id;return n.map((function(e){return e.id===a?(0,m.Z)((0,m.Z)({},e),{},(0,N.Z)({},t,r)):e}))};return(0,f.jsx)(f.Fragment,{children:n.map((function(e,i){return(0,f.jsxs)(a.Z,{className:"m-4",gutter:16,children:[(0,f.jsx)(l.Z,{span:12,children:(0,G.E2)({placeholder:"名字",value:e.name,onChange:function(n){return r(n,"name",e.id)}})}),(0,f.jsx)(l.Z,{span:12,children:(0,G.E2)({placeholder:"标识类型",value:e.type,onChange:function(n){return r(n,"type",e.id)}})}),(0,f.jsx)(l.Z,{span:12,children:(0,W._)({placeholder:"组件类型",value:e.btnType,option:z,fieldNames:{label:"type",value:"value"},onChange:function(r){return function(e,r,a){var l=o({options:n,key:"btnType",value:e,id:a});t(l)}(r,0,e.id)}})}),(0,f.jsx)(l.Z,{span:12,children:(0,G.E2)({placeholder:"权限标识",value:e.permission,onChange:function(n){return r(n,"hasPermiss",e.id)}})}),(0,f.jsx)(l.Z,{span:12,children:(0,G.E2)({placeholder:"图标",value:e.iconFont,onChange:function(n){return r(n,"iconFont",e.id)}})}),(0,f.jsx)(l.Z,{span:12,children:(0,G.tm)({placeholder:"span",value:e.span,onChange:function(r){return function(e,r,a){var l=o({options:n,key:"span",value:e,id:a});t(l)}(r,0,e.id)}})}),(0,f.jsx)(l.Z,{span:12,children:(0,H.c)({option:[{name:"",type:"add",block:!0,btnType:"dashed",iconFont:(0,f.jsx)(M.Z,{}),span:24}],onClick:function(){var r,a;r=e.id,a=n.find((function(e){return e.id===r})),a&&t([].concat((0,k.Z)(n),[(0,m.Z)((0,m.Z)({},a),{},{id:(0,u.Z)()})]))}})}),(0,f.jsx)(l.Z,{span:12,children:(0,H.c)({option:[{name:"",type:"subtract",block:!0,btnType:"dashed",iconFont:(0,f.jsx)(q.Z,{}),span:24}],onClick:function(){!function(e){if(1!==n.length){var r=n.filter((function(n){return n.id!==e}));t(r)}}(e.id)}})})]},e.id)}))})},Q=function(e,n){return""===n||null==n||/^[_a-zA-Z0-9]+$/.test(n)?Promise.resolve():Promise.reject(new Error("仅由英文字母，数字以及下划线组成"))},U=[{label:"启用",value:!1},{label:"禁用",value:!0}],X=[],Y=["select","cascader"],ee=["label","name","labelCol","span","disabled","trigger","staticOptions","url","urlLabel","urlValue","urlBtn","parent","isRule","isRuleTitle","rule","ruleTitle"],ne=["input","textArea"],te=["label","name","labelCol","span","disabled","parent","isRule","isRuleTitle","rule","ruleTitle"],re=["button"],ae=["name","span","button"],le=[{value:"",label:"",id:(0,u.Z)()}],oe=(0,r.memo)((function(){var e=(0,Z.Z)().token,n=function(){var e=(0,r.useContext)(y);return{editItemValue:function(n){if(null!=e&&e.state.selectFormItemKey){var t=e.state.formList.map((function(t){return(null==e?void 0:e.state.selectFormItemKey)===t.key?(0,m.Z)((0,m.Z)({},t),n):t}));e.dispatch({type:"formList",value:t})}}}}(),t=n.editItemValue,a=(0,r.useContext)(y),l=L.Z.useForm(),o=(0,s.Z)(l,1)[0],i=function(){var e=(0,r.useContext)(y);return[(0,P.Z)(D,{manual:!0,onSuccess:function(n){var t=n.data,r=(null==e?void 0:e.state.formList.map((function(n){return n.key===e.state.selectFormItemKey?(0,m.Z)((0,m.Z)({},n),{},{option:t}):n})))||[];null==e||e.dispatch({type:"formList",value:r})}}).run]}(),u=(0,s.Z)(i,1)[0],c=function(){var e=(0,J.Z)((0,B.Z)().mark((function e(){var n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("1"!==b){e.next=4;break}t({option:C}),e.next=14;break;case 4:if("2"!==b){e.next=14;break}return e.prev=5,e.next=8,o.validateFields(["url"]);case 8:n=o.getFieldValue("url"),u(n),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),p=(0,r.useMemo)((function(){var e=null==a?void 0:a.state.formList.filter((function(e){return e.key!==a.state.selectFormItemKey}));return null==e?void 0:e.map((function(e){return{label:e.label,name:e.name}}))}),[null==a?void 0:a.state.formList]),d=(0,r.useState)("1"),v=(0,s.Z)(d,2),b=v[0],h=v[1],x=(0,r.useState)(le),g=(0,s.Z)(x,2),C=g[0],k=g[1],j=(0,r.useState)(X),F=(0,s.Z)(j,2),O=F[0],w=F[1],S=ie({staticPattern:b,items:[{key:"1",label:"静态数据"},{key:"2",label:"动态数据"}],onChangeStatic:function(e){h(e),"1"===e?(o.setFieldValue("url",""),o.setFieldValue("urlLabel",""),o.setFieldValue("urlValue","")):"2"===e&&k(le),t({option:[],trigger:e})},staticOptions:C,updateStaticOptions:function(e){k(e)},onGetOption:c,formListLabel:p,buttonOptions:O,updateButtonOptions:function(e){w(e),t({option:e})}}).formList,N=(0,r.useMemo)((function(){var e=null==a?void 0:a.state.formList.find((function(e){return e.key===(null==a?void 0:a.state.selectFormItemKey)}));return null!=e&&e.type?S.filter((function(n){return Y.indexOf(null==e?void 0:e.type)>-1?ee.indexOf(n.name)>-1:ne.indexOf(null==e?void 0:e.type)>-1?te.indexOf(n.name)>-1:re.indexOf(null==e?void 0:e.type)>-1?ae.indexOf(n.name)>-1:void 0})):[]}),[null==a?void 0:a.state.selectFormItemKey,null==a?void 0:a.state.formList,C,O]);return(0,r.useEffect)((function(){if(null!=a&&a.state.selectFormItemKey){var e=a.state.formList.find((function(e){return(null==a?void 0:a.state.selectFormItemKey)===e.key}))||{},n=e.type,t=e.span,r=e.label,l=e.disabled,i=e.url,s=e.parent,u=e.name,c=e.rule,p=e.isRule,d=e.labelCol,m=e.trigger,f=e.urlLabel,y=e.urlValue,v=e.option;o.setFieldsValue({span:t,label:r,disabled:l,url:i,parent:s,name:u,rule:c,isRule:p,labelCol:d,urlLabel:f,urlValue:y,option:v}),m&&h(m),"button"===n&&w(v)}}),[null==a?void 0:a.state.selectFormItemKey]),K("span",o),K("label",o),K("disabled",o),K("url",o),K("parent",o),K("isRule",o),K("isRuleTitle",o),K("rule",o),K("ruleTitle",o),K("name",o),K("labelCol",o),K("urlLabel",o),K("urlValue",o),null!=a&&a.state.selectFormItemKey?(0,f.jsx)("div",{className:"rounded-lg p-2 border-2 border-solid",style:{borderColor:e.colorPrimaryBorder},children:(0,f.jsx)(I.Z,{form:o,formList:N})}):(0,f.jsx)(f.Fragment,{})}));oe.displayName="EditForm";var ie=function(e){var n=e.staticPattern,t=e.items,r=e.onChangeStatic,a=e.staticOptions,l=e.updateStaticOptions,o=e.onGetOption,i=e.formListLabel,s=e.buttonOptions,u=e.updateButtonOptions;return{formList:[{type:"input",key:"1",label:"标签",name:"label",span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"input",rules:[{required:!0,message:"请输入数据字段"},{validator:Q}],key:"2",label:"数据字段",name:"name",span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"slider",key:"3",label:"label宽度",name:"labelCol",comConfig:{max:24,min:0},span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"slider",key:"4",label:"总宽度",name:"span",comConfig:{max:24,min:6},span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"select",key:"5",label:"是否禁用",name:"disabled",comConfig:{option:U,allowClear:!1},span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"userDefined",name:"trigger",comConfig:{children:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(A.Z,{activeKey:n,items:t,onChange:r})})},key:"6"},{type:"userDefined",key:"7777",name:"staticOptions",span:24,show:"1"===n,comConfig:{children:(0,f.jsx)(_,{options:a,updateOptions:l})},layout:{labelCol:{span:0},wrapperCol:{span:24}}},{type:"input",key:"88",label:"",name:"url",comConfig:{placeholder:"请输入url"},rules:[{required:!0,message:"请输入url"}],span:12,show:"2"===n,layout:{labelCol:{span:0},wrapperCol:{span:24}}},{type:"input",key:"98",label:"",name:"urlLabel",comConfig:{placeholder:"label"},rules:[{required:!0,message:"请输入label"}],span:6,show:"2"===n,layout:{labelCol:{span:0},wrapperCol:{span:24}}},{type:"input",key:"108",label:"",name:"urlValue",comConfig:{placeholder:"value"},rules:[{required:!0,message:"请输入value"}],span:6,show:"2"===n,layout:{labelCol:{span:0},wrapperCol:{span:24}}},{type:"userDefined",key:"11",name:"urlBtn",span:6,comConfig:{children:(0,f.jsx)("div",{className:"flex justify-end",children:(0,f.jsx)(F.ZP,{type:"primary",onClick:o,children:"发送"})})},layout:{labelCol:{span:0},wrapperCol:{span:24}}},{type:"select",key:"12",label:"关联父级",name:"parent",comConfig:{option:i,fieldNames:{label:"label",value:"name"}},span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"radio",name:"isRule",label:"是否必填",rules:[],key:"13",span:24,comConfig:{option:[{value:1,name:"否",key:1},{value:2,name:"是",key:2}],optionType:"button"},layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"textArea",key:"14",label:"是否必填提示语",name:"isRuleTitle",span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"textArea",key:"15",label:"校验规则",name:"rule",span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"textArea",key:"16",label:"校验规则提示语",name:"ruleTitle",span:24,layout:{labelCol:{span:6},wrapperCol:{span:18}}},{type:"userDefined",key:"button",name:"button",span:24,comConfig:{children:(0,f.jsx)($,{options:s,updateOptions:u})},layout:{labelCol:{span:0},wrapperCol:{span:24}}}]}},se=oe,ue=t(29883),ce=t(51283),pe=t(71939),de=t.n(pe),me=t(28709),fe=[{label:"dnd格式",value:"dnd"},{label:"标准格式",value:"standard"}],ye=function(e){var n=e.open,t=e.onOkOrCancel,a=e.confirmLoading,l=(0,r.useContext)(y),o=R().getFormData,i=(0,r.useState)([]),u=(0,s.Z)(i,2),c=u[0],p=u[1];(0,r.useEffect)((function(){n&&x("dnd")}),[n]);var d={name:null,src:c,theme:"rjv-default",iconStyle:"circle",indentWidth:6,collapsed:2,collapseStringsAfterLength:!1,displayDataTypes:!0,displayObjectSize:!0},v=(0,r.useState)("dnd"),b=(0,s.Z)(v,2),h=b[0],Z=b[1],x=function(e){Z(e),"standard"===e?p((null==l?void 0:l.state.formList.map((function(e){return o(e)})))||[]):"dnd"===e&&p((null==l?void 0:l.state.formList)||[])};return(0,f.jsxs)(ce.Z,{title:"json",width:800,open:n,onOkOrCancel:t,confirmLoading:a,children:[(0,f.jsx)(me.Z,{options:fe,value:h,onChange:x}),(0,f.jsx)(de(),(0,m.Z)({},d))]})},ve=function(e,n){if("string"==typeof n)try{var t=JSON.parse(n);return"object"==typeof t&&t?Promise.resolve():Promise.reject("格式不对")}catch(e){return Promise.reject("格式不对")}},be=function(e){var n=e.form,t=e.open,r=e.onOkOrCancel,a=e.confirmLoading,l=[{type:"textArea",key:"1",label:"JSON",name:"json",comConfig:{rows:20},span:24,rules:[{validator:ve}],layout:{labelCol:{span:2},wrapperCol:{span:22}}}];return(0,f.jsx)(ce.Z,{width:1e3,title:"导入dnd-json",open:t,onOkOrCancel:r,confirmLoading:a,children:(0,f.jsx)(I.Z,{form:n,formList:l})})},he=function(e){var n=e.form,t=e.open,a=e.onOkOrCancel,l=e.confirmLoading,o=(0,r.useContext)(y),i=R().getFormData;return(0,f.jsx)(ce.Z,{width:800,title:"示例",open:t,onOkOrCancel:a,confirmLoading:l,children:(0,f.jsx)(I.Z,{form:n,formList:(null==o?void 0:o.state.formList.map((function(e){return i(e)})))||[]})})},Ze=t(94805),xe=function(e){var n=e.open,t=e.onOkOrCancel,a=e.confirmLoading,l=(0,r.useContext)(y),o=R().getFormData;return(0,f.jsx)(ce.Z,{width:1e3,title:"导入dnd-json",open:n,onOkOrCancel:t,confirmLoading:a,children:(0,f.jsxs)(Ze.Z,{bordered:!0,children:[(0,f.jsx)("div",{children:"import React, {FC} from 'react';"}),(0,f.jsx)("div",{className:"mb-2",children:"import Iform from '@/antdComponents/iForm';"}),(0,f.jsx)("div",{className:"mb-1 whitespace-pre",children:"const SeachForm: FC<Iprops> = ({ form, onFinish }) => {"}),(0,f.jsx)("div",{style:{whiteSpace:"pre-line"},className:"mb-1 whitespace-pre",children:"  const formList = "+JSON.stringify((null==l?void 0:l.state.formList.map((function(e){return o(e)})))||[],null,2)}),(0,f.jsx)("div",{className:"mb-1 whitespace-pre",children:"  return <Iform form={form} formList={formList}></Iform>;"}),(0,f.jsx)("div",{className:"mb-1 whitespace-pre",children:"};"})]})})},ge=function(){var e=(0,r.useContext)(y),n=(0,r.useState)(!1),t=(0,s.Z)(n,2),a=t[0],l=t[1],o=(0,r.useState)(!1),i=(0,s.Z)(o,2),u=i[0],c=(i[1],(0,r.useState)(!1)),p=(0,s.Z)(c,2),d=p[0],m=p[1],v=(0,r.useState)(!1),b=(0,s.Z)(v,2),h=b[0],Z=(b[1],L.Z.useForm()),x=(0,s.Z)(Z,1)[0],g=function(){var n=(0,J.Z)((0,B.Z)().mark((function n(t){var r;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("ok"!==t){n.next=17;break}if(r=x.getFieldValue("json")){n.next=4;break}return n.abrupt("return",m(!1));case 4:return n.prev=4,n.next=7,x.validateFields();case 7:n.sent,null==e||e.dispatch({type:"formList",value:JSON.parse(r)}),x.resetFields(),m(!1),n.next=15;break;case 13:n.prev=13,n.t0=n.catch(4);case 15:n.next=19;break;case 17:x.resetFields(),m(!1);case 19:case"end":return n.stop()}}),n,null,[[4,13]])})));return function(e){return n.apply(this,arguments)}}(),C=(0,r.useState)(!1),k=(0,s.Z)(C,2),j=k[0],F=k[1],O=(0,r.useState)(!1),w=(0,s.Z)(O,2),I=w[0],S=(w[1],L.Z.useForm()),N=(0,s.Z)(S,1)[0],P=function(){var e=(0,J.Z)((0,B.Z)().mark((function e(n){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F(!1);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T=(0,r.useState)(!1),D=(0,s.Z)(T,2),K=D[0],R=D[1],E=(0,r.useState)(!1),V=(0,s.Z)(E,2),A=V[0];return V[1],(0,f.jsxs)("div",{className:"mb-2",children:[(0,f.jsx)(ue.Z,{buttonList:[{name:"生成示例",type:"template",btnType:"primary"},{name:"生成JSON",type:"JSON",btnType:"primary",className:"ml-1"},{name:"导入JSON",type:"import",btnType:"primary",className:"ml-1"},{name:"生成代码",type:"generatCode",btnType:"primary",className:"ml-1"}],onClick:function(e){"JSON"===e?l(!0):"import"===e?m(!0):"template"===e?F(!0):"generatCode"===e&&R(!0)}}),(0,f.jsx)(ye,{open:a,onOkOrCancel:function(e){l(!1)},confirmLoading:u}),(0,f.jsx)(be,{open:d,onOkOrCancel:g,confirmLoading:h,form:x}),(0,f.jsx)(he,{open:j,onOkOrCancel:P,confirmLoading:I,form:N}),(0,f.jsx)(xe,{open:K,onOkOrCancel:function(e){R(!1)},confirmLoading:A})]})},Ce=function(){return(0,f.jsx)(Ze.Z,{children:(0,f.jsxs)(h,{children:[(0,f.jsx)(ge,{}),(0,f.jsxs)(a.Z,{gutter:8,children:[(0,f.jsxs)(o.W,{backend:i.PD,children:[(0,f.jsx)(l.Z,{span:6,children:(0,f.jsx)(C,{})}),(0,f.jsx)(l.Z,{span:12,children:(0,f.jsx)(V,{})})]}),(0,f.jsx)(l.Z,{span:6,children:(0,f.jsx)(se,{})})]})]})})}}}]);
//# sourceMappingURL=dnd.d93ed3bdc4a6d5d0dfe4.js.map