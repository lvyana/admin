"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[8643],{50512:(t,e,s)=>{s.d(e,{A:()=>a});var n=s(65043),i=function(t,e,s,n){return new(s||(s=Promise))((function(i,o){function c(t){try{r(n.next(t))}catch(t){o(t)}}function h(t){try{r(n.throw(t))}catch(t){o(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(c,h)}r((n=n.apply(t,e||[])).next())}))};const o=t=>{throw new Error(t)},c=t=>{const e=Object.keys({output:"",type:"",isEnd:!1,speed:80,backSpeed:40,sleep:3e3,singleBack:!1,sentencePause:!1}),s=Object.keys(t);e.length!==s.length&&o("配置对象错误: 字段数量不正确！"),e.forEach((e=>{void 0!==t[e]&&null!==t[e]||o("配置对象错误：字段值为null或undefined！")}))},h=t=>{Object.keys(t).forEach((e=>{const s=r[e](t);s.check()&&s.showTip(e)}))},r={output:t=>new l("string",t.output),type:t=>new l("string",t.type),isEnd:t=>new l("boolean",t.isEnd),speed:t=>new l("number",t.speed),backSpeed:t=>new l("number",t.backSpeed),sleep:t=>new l("number",t.sleep),singleBack:t=>new l("boolean",t.singleBack),sentencePause:t=>new l("boolean",t.sentencePause)};class l{constructor(t,e){this.type=t,this.field=e}check(){return typeof this.field!=="".concat(this.type)}showTip(t){o("配置对象错误：属性 ".concat(t," 必须为 ").concat(this.type," 类型！"))}}const u=class{constructor(t,e,s,n){c(t),h(t),this.obj=t,this.input="string"==typeof e?[e]:e,this.fn="function"==typeof s?s:function(){},this.hooks="function"==typeof n?n:function(){},this.timer=0,this.typeAction={rollback:this.typedBack.bind(this),normal:this.play.bind(this),custom:this.fn},this.init()}init(){this.play()}play(){if(!this.input.length)return this.fn(this);let t=0,e=!1,s=this.input.shift()||"";this.timer=setInterval((()=>(t===s.length&&(t=0,e=!0,this.closeTimer()),this.obj.isEnd?this.closeTimer():e?this.nextTick():(this.obj.output=s.slice(0,t+1),this.hooks(s.slice(0,t+1),this),void t++))),this.obj.speed)}typedBack(){if(!this.input.length&&this.obj.sentencePause)return this.fn(this);let t=this.obj.output,e=t.length,s=!1;this.timer=setInterval((()=>(-1===e&&(this.obj.output="",this.hooks("",this),e=0,s=!0,this.closeTimer()),this.obj.isEnd?(this.closeTimer(),this.obj.singleBack=!1):s?(this.obj.singleBack=!1,(()=>{const{length:t}=this.input;return t?this.play():this.fn(this)})()):(this.obj.output=t.slice(0,e+1),this.hooks(t.slice(0,e+1),this),void e--))),this.obj.backSpeed)}nextTick(){return i(this,void 0,void 0,(function*(){return yield this.sleep(this.obj.sleep),this.obj.singleBack?this.typedBack():this.getOutputType()}))}getOutputType(){return this.typeAction[this.obj.type](this)}closeTimer(){clearInterval(this.timer)}sleep(t){return new Promise((e=>setTimeout(e,t)))}close(){return this.obj.isEnd=!0}},a=t=>{const[e,s]=(0,n.useState)(""),[i,o]=(0,n.useState)(null);(0,n.useLayoutEffect)((()=>(c(),()=>{null==i||i.close()})),[]);const c=()=>{const e=new u({output:"",isEnd:!1,speed:80,singleBack:!1,sleep:0,type:"normal",backSpeed:40,sentencePause:!1},t,h,r);o(e)},h=()=>{},r=t=>{s(t)};return{output:e}}},67516:(t,e,s)=>{s.r(e),s.d(e,{default:()=>l});var n=s(65043),i=s(97950),o=s(50512),c=s(76566),h=s(70579);const r=t=>{let{children:e}=t;const[s,o]=(0,n.useState)(),c=(0,n.useRef)(null);return(0,n.useEffect)((()=>{c.current&&o((0,i.createPortal)(e,c.current))}),[]),(0,h.jsxs)(h.Fragment,{children:[s,(0,h.jsx)("div",{ref:c,className:"bottom-1 border-cyan-500 border-solid",children:"Child"})]})},l=()=>(0,h.jsxs)(c.A,{children:[(0,h.jsx)(u,{}),"hello",(0,h.jsx)(r,{children:(0,h.jsx)("div",{children:"挂载到child身上"})})]}),u=()=>{const{output:t}=(0,o.A)("createPortal(child, container)的入参： child：任何可渲染的子元素 container：是一个DOM元素");return(0,h.jsxs)("div",{children:[t," "]})}}}]);