"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[439],{34095:function(e,n,s){s.r(n),s.d(n,{default:function(){return b}});var t=s(29439),i=s(72791),r=s(49655),a=s(21940),o=s(22266),l=s(11142),u=s(64957),c=(s(15580),s(19689)),d=s(80184),p=function(e){var n=e.updatepPhoto,s=e.setPhotoFinish,r=(0,i.useRef)(null),a=(0,i.useState)(!0),o=(0,t.Z)(a,2),l=o[0],p=o[1];return(0,d.jsx)(c.Z,{loading:l,children:(0,d.jsx)(u.Z,{src:n,style:{height:400,width:"100%"},initialAspectRatio:16/9,guides:!1,crop:function(){var e=null==r?void 0:r.current,n=null==e?void 0:e.cropper;s(n.getCroppedCanvas().toDataURL()),p(!1)},ref:r})})},h=s(66106),f=s(30914),m=s(29736),x=s(87309),j=s(72351),Z=function(e){var n=e.photoFinish,s=e.setPhotoFinish,r=(0,i.useState)(n),a=(0,t.Z)(r,2),u=a[0],c=a[1];return(0,d.jsxs)("div",{children:[(0,d.jsxs)(h.Z,{gutter:20,align:"bottom",children:[(0,d.jsx)(f.Z,{span:16,children:(0,d.jsx)(p,{updatepPhoto:u,setPhotoFinish:s})}),(0,d.jsx)(f.Z,{span:8,children:(0,d.jsx)(o.C,{src:n,size:200,icon:(0,d.jsx)(l.Z,{})})})]}),(0,d.jsx)("div",{style:{marginTop:"10px"},children:(0,d.jsx)(m.Z,{name:"file",showUploadList:!1,beforeUpload:function(e){return v(e,(function(e){c(e)})),!1},children:(0,d.jsx)(x.ZP,{icon:(0,d.jsx)(j.Z,{}),children:"上传头像"})})})]})},v=function(e,n){var s=new FileReader;s.addEventListener("load",(function(){return n(s.result)})),s.readAsDataURL(e)},P=s(57689),g=s(17615),F=s(376),w=function(){var e=(0,P.TH)(),n=g.Z.useForm(),s=(0,t.Z)(n,1)[0];(0,i.useEffect)((function(){var n;e.state?s.setFieldsValue({userName:null===(n=e.state)||void 0===n?void 0:n.name}):s.setFieldsValue({userName:void 0})}),[s,e]);return(0,d.jsxs)(g.Z,{form:s,labelCol:{span:4,offset:4},wrapperCol:{span:12},onFinish:function(e){},onFinishFailed:function(e){},children:[(0,d.jsx)(g.Z.Item,{label:"用户名",name:"userName",rules:[{required:!0,message:"Please input your username!"}],children:(0,d.jsx)(F.Z,{})}),(0,d.jsx)(g.Z.Item,{label:"密码",name:"passWord",rules:[{required:!0,message:"Please input your password!"}],children:(0,d.jsx)(F.Z.Password,{})}),(0,d.jsx)(g.Z.Item,{label:"确认密码",name:"confirmPassWord",rules:[{required:!0,message:"Please input your confirm password!"},{validator:function(e,n){return n&&n!==s.getFieldValue("passWord")?Promise.reject(new Error("密码不一致")):Promise.resolve()}}],children:(0,d.jsx)(F.Z.Password,{})}),(0,d.jsx)(g.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,d.jsx)(x.ZP,{type:"primary",htmlType:"submit",children:"Submit"})})]})},C=s(51283),b=function(){var e=(0,r.TL)(),n=(0,i.useState)(!1),s=(0,t.Z)(n,2),u=s[0],c=s[1],p=(0,i.useState)(!1),h=(0,t.Z)(p,2),f=h[0],m=h[1],x=(0,r.CG)(a.MM),j=(0,i.useState)(x),v=(0,t.Z)(j,2),P=v[0],g=v[1],F=function(){m(!0),setTimeout((function(){e((0,a._d)(P)),c(!1),m(!1)}),1e3)},b=function(){c(!1)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"myCenter animate__animated animate__fadeIn",children:[(0,d.jsx)("div",{style:{marginBottom:"20px",textAlign:"center"},children:(0,d.jsx)("span",{onClick:function(){g(x),c(!0)},children:(0,d.jsx)(o.C,{src:x,size:200,icon:(0,d.jsx)(l.Z,{})})})}),(0,d.jsx)(w,{})]}),(0,d.jsx)(C.Z,{title:"修改头像",open:u,confirmLoading:f,onOkOrCancel:function(e){"ok"===e?F():"cancel"===e&&b()},width:800,children:(0,d.jsx)(Z,{photoFinish:P,setPhotoFinish:g})})]})}}}]);